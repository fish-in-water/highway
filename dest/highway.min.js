var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),defineProperty=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},counter=0,unique=function(e){return""+(e||"")+counter++},assign=function(){var e=Array.prototype.slice.call(arguments);if("undefined"!=typeof jQuery){var t=e[e.length-1];!0!==t&&!1!==t||(e.pop(),e.unshift(t))}return $.extend.apply(null,e)},include=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},isPlainObject=$.isPlainObject,isDate=function(e){return e instanceof Date},isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject=function(e){return e instanceof Object},isNumeric=function(e){return!isNaN(e)},isTrue=function(e){return!(!1===e||"false"===e||""===e||null==e||isNumeric(e)&&!(e-0))},isEqual=function(e,t){return!isObject(e)&&!isObject(t)&&e===t},extend=function(e){var t=this,r=function(e){function t(e){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return inherits(t,e),t}(t);return assign(r.prototype,e),r},MapList=function(){function e(){classCallCheck(this,e),this.data={}}return createClass(e,[{key:"add",value:function(e,t){var r=this,n=this.data;return(n[e]||(n[e]=[])).push(t),function(){r.remove(e,t)}}},{key:"remove",value:function(e,t){for(var r=this.data,n=r[e]||[],i=0,o=n.length;i<o;i++){var a=n[i];null!=a&&(null!=t&&a!==t||(n.splice(i,1),i--))}}},{key:"find",value:function(e,t){if(null==e)return[];for(var r=this.data,n=r[e]||[],i=[],o=n,a=Array.isArray(o),c=0,o=a?o:o[Symbol.iterator]();;){var s;if(a){if(c>=o.length)break;s=o[c++]}else{if(c=o.next(),c.done)break;s=c.value}var u=s;null!=t&&u!==t||i.push(u)}return i}},{key:"clear",value:function(){var e=this.data;for(var t in e)this.remove(t)}},{key:"keys",value:function(){var e=[];for(var t in this.data)e.push(t);return e}},{key:"values",value:function(){for(var e=[],t=this.keys(),r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;e=e.concat(this.find(o))}return e}}]),e}(),deconstruct=function(e){var t=!1,r=!0;/{{{\s*[\s\S]+\s*}}}/.test(e)?(e=e.trim().replace(/^[\{]{3}|[\}]{3}$/gi,""),t=!0,r=!1):/{{\s*[\s\S]+\s*}}/.test(e)?(e=e.trim().replace(/^[\{]{2}|[\}]{2}$/gi,""),t=!0,r=!0):/\[\[\[\s*[\s\S]+\s*]]]/.test(e)?(e=e.trim().replace(/^[\[]{3}|[\]]{3}$/gi,""),t=!1,r=!1):/\[\[\s*[\s\S]+\s*]]/.test(e)?(e=e.trim().replace(/^[\[]{2}|[\]]{2}$/gi,""),t=!1,r=!0):(t=!0,r=!1);var n=e.split("|").map(function(e){return e.trim()});return{prop:n[0],watch:t,secure:r,pipes:n.slice(1)}},construct=function(e,t,r){return e=(e||"").trim(),t?r?"{{"+e+"}}":"{{{"+e+"}}}":r?"[["+e+"]]":"[[["+e+"]]]"},secureHtml=function(e){return null==e||""==e?e:"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/ /g,"&nbsp;"):e},secureUri=function(e){return null==e||""==e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/ /g,"&nbsp;"):e},getAttrs=function(e){var t={},r=e[0];for(var n in r.attributes)r.attributes.hasOwnProperty(n)&&(t[r.attributes[n].name]=r.attributes[n].value);return t},utils={unique:unique,assign:assign,include:include,isPlainObject:isPlainObject,isDate:isDate,isArray:isArray,isObject:isObject,isNumeric:isNumeric,isTrue:isTrue,MapList:MapList,deconstruct:deconstruct,construct:construct,secureHtml:secureHtml,secureUri:secureUri,getAttrs:getAttrs},components={},component=function(e,t){components[e.toLowerCase()]=t};assign(component,{initial:function(e){e.$components=assign({},components,function(){var t={};for(var r in e.$components)t[r.toLowerCase()]=e.$components[r];return t}()),e.$components._instances=new MapList,e.$components.$refs={}},compile:function(e,t){if(!this.isComponent(e,t))return e;if(e===t.$el)this.createComponent(e,t,null);else{var r=this.createComponent(e,t,t);t.$components._instances.add(element.getId(r.$el,!0),r);var n=r.$el.attr("hi-ref");n&&(t.$components.$refs[n]=r)}return null},isComponent:function(e,t){var r=t.$components._instances.find(element.getId(e));if(r&&r.length)return!0;var n=e[0];return n&&1===n.nodeType&&!!t.$components[n.tagName.toLowerCase()]},createComponent:function(e,t,r){var n=e[0].tagName.toLowerCase(),i=t.$components[n],o=$("<div></div>").html(e.html()).attr(assign({"hi-component":n},getAttrs(e)));return e.replaceWith(o),new i({$el:o,$parent:r})},remove:function(e,t){if(component.isComponent(e,t)){var r=element.getId(e);null!=r&&(t.$components._instances.find(r).forEach(function(e){if(e.$destroy(),e.$el){var r=e.$el.attr("hi-ref");r&&delete t.$components.$refs[r]}}),t.$components._instances.remove(r))}},destroy:function(e){e.$components._instances.values().forEach(function(e){e.$destroy()})}});var element={initial:function(e){e.$el=e.$el||$("<div></div>"),e.$template&&e.$el.html($(e.$template))},remove:function(e,t){e.remove()},getId:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.attr("hi-id");return t&&null==r&&e.attr("hi-id",r=unique()),r},destroy:function(e){e.$el.remove(),e.$el=null,e.$template=null}},lowercase=function(){return{$iterator:function(e){return null==e?e:(e+"").toLowerCase()}}},uppercase=function(){return{$iterator:function(e){return null==e?e:(e+"").toUpperCase()}}},sort=function(e){var t=e.$source,r=t.prop,n=t.watch,i=t.secure,o=e.$exp,a=e.$scope,c=e.$pipeline,s=e.$update,u=o.match(/(\S+)\s+(\S+)/),l=deconstruct(u[1]),p=l.prop,$=deconstruct(u[2]||"'asc'"),f=$.prop,v=function(e){var t=a.$get(p),r=a.$get(f);return e.sort(function(e,n){return"asc"===r?e[t]>n[t]?1:-1:e[t]>n[t]?-1:1})};if(n){var d=void 0,m=void 0;return{$mount:function(){d=a.$watch(p,function(){s(c(a.$get(r),i))}),m=a.$watch(f,function(){s(c(a.$get(r),i))})},$iterator:v,$unmount:function(){d(),m()}}}return{$iterator:v}},limit=function(e){var t=e.$source,r=t.prop,n=t.watch,i=(t.secure,e.$exp),o=e.$scope,a=e.$pipeline,c=e.$update,s=deconstruct(i),u=s.prop,l=function(e){return(e||[]).slice(0,(isNumeric(i)?i:o.$get(i))-0)};if(n){var p=null;return{$mount:function(){p=o.$watch(u,function(){c(a(r?secureHtml(o.$get(r)):o.$get(r)))})},$iterator:l,$unmount:function(){p()}}}return{$iterator:l}},SYMBOLS={EQUAL:"=",STRICT_EQUAL:"==",NOT_EQUAL:"!=",STRICT_NOT_EQUAL:"!==",START_WITH:"^=",END_WITH:"$=",CONTAINS:"*="},filter=function(e){var t=e.$source,r=t.prop,n=t.watch,i=(t.secure,e.$exp),o=e.$scope,a=e.$pipeline,c=e.$update,s=i.split(/or/i).map(function(e){var t=e.trim().match(/(\S+)\s*([=!^$*]+)\s*(\S+)/);return{field:deconstruct(t[1]),symbol:t[2],value:deconstruct(t[3])}}),u=function(e){for(var t=s,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var a=i,c=a.field.prop,u=a.symbol,l=a.value.prop,p=o.$get(c),$=o.$get(l);if(u===SYMBOLS.EQUAL&&e[p]==$)return!0;if(u===SYMBOLS.STRICT_EQUAL&&e[p]===$)return!0;if(u===SYMBOLS.NOT_EQUAL&&e[p]!=$)return!0;if(u===SYMBOLS.STRICT_NOT_EQUAL&&e[p]!==$)return!0;if(u===SYMBOLS.START_WITH&&new RegExp("^"+$).test(e[p]))return!0;if(u===SYMBOLS.END_WITH&&new RegExp($+"$").test(e[p]))return!0;if(u===SYMBOLS.CONTAINS&&new RegExp(""+$).test(e[p]))return!0}return!1},l=function(e){for(var t=[],r=e||[],n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var a=o;u(a)&&t.push(a)}return t};if(n){var p=[];return{$mount:function(){for(var e=s,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var u=i,l=u.field.prop,$=u.value.prop;p.push(o.$watch(l,function(){c(a(o.$get(r)))})),p.push(o.$watch($,function(){c(a(o.$get(r)))}))}},$iterator:l,$unmount:function(){for(var e=p,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n()}p=null}}}return{$iterator:l}},json=function(){return{$iterator:function(e){return isObject(e)?JSON.stringify(e):e}}},date=function(e){var t=e.$source,r=t.prop,n=t.watch,i=(t.secure,e.$exp),o=e.$scope,a=e.$pipeline,c=e.$update,s=deconstruct(i),u=s.prop,l=function(e){if(isDate(e)){var t=o.$get(u),r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[k]:("00"+r[n]).substr((""+r[n]).length)));return t}return e};if(n){var p=null;return{$mount:function(){p=o.$watch(u,function(){c(a(r?secureHtml(o.$get(r)):o.$get(r)))})},$iterator:l,$unmount:function(){p()}}}return{$iterator:l}},number=function(e){var t=e.$source,r=t.prop,n=t.watch,i=(t.secure,e.$exp),o=e.$scope,a=e.$pipeline,c=e.$update,s=deconstruct(i),u=s.prop,l=function(e){return isNumeric(e)?e.toFixed(o.$get(i)-0):e};if(n){var p=null;return{$mount:function(){p=o.$watch(u,function(){c(a(r?secureHtml(o.$get(r)):o.$get(r)))})},$iterator:l,$unmount:function(){p()}}}return{$iterator:l}},pipes={},pipe=function(e,t){pipes[e]=t};assign(pipe,{initial:function(e){e.$pipes=assign({},pipes,e.$pipes),e.$pipes._instances=new MapList},compile:function(e,t,r,n,i){for(var o=unique("p"),a=function(e){return i.$pipes._instances.find(o).reduce(function(e,t){return t.$iterator(e)},e)},c=t,s=Array.isArray(c),u=0,c=s?c:c[Symbol.iterator]();;){var l;if(s){if(u>=c.length)break;l=c[u++]}else{if(u=c.next(),u.done)break;l=u.value}var p=l,$=void 0,f=void 0,v=p.indexOf(":");-1!=v?($=p.substring(0,v).trim(),f=p.substring(v+1).trim()):($=p,f=null);var d=i.$pipes[$]({$source:e,$ctx:i,$scope:r,$exp:f,$update:n,$pipeline:a});d&&(d.$mount&&d.$mount(i),i.$pipes._instances.add(o,d))}return assign(a,{destroy:function(){for(var e=i.$pipes._instances.find(o),t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var c=a;c.$unmount&&c.$unmount(i)}i.$pipes._instances.remove(o)}})},destroy:function(e){e.$pipes._instances.clear(),e.$pipes._instances=null,e.$pipes=null}}),pipe("lowercase",lowercase),pipe("uppercase",uppercase),pipe("sort",sort),pipe("limit",limit),pipe("filter",filter),pipe("json",json),pipe("date",date),pipe("number",number);var scope=function(e){var t=e.$ctx;return t.$scope=function e(r){var n={},i=new MapList;return assign(Object.create({$create:function(t){var r=e(t);return r.$parent=this,r},$series:function(e){var t={};return function e(r,n){if(t[r]=n,isArray(n))for(var i=0,o=n.length;i<o;i++){var a=r+"["+i+"]";t[a]=n[i],e(r+"["+i+"]",n[i])}else if(isObject(n))for(var c in n)if(n.hasOwnProperty(c)){var s=r?r+"."+c:""+c;e(s,n[c])}}("",e),t},$where:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return{scope:this,prop:e};var r=e.match(/^(?:\$parent).([\s\S]*)/);return r?{scope:t.$parent.$scope,prop:r[1]}:{scope:this,prop:e}},$get:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.match(/^['"]([\s\S]*)['"]$/);if(r)return r[1];var i=this.$where(t);if(i.scope===this){var o=function(){for(var r=n[t],i=e;void 0===r&&i.$parent;)i=i.$parent,r=i.$get(t);return r}.call(this);return isObject(o)?isDate(o)?new Date(o):isArray(o)?assign([],o,!0):assign({},o,!0):o}return i.scope.$get(i.prop)},$set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.match(/^['"]([\s\S]*)['"]$/);if(r)return r[1];if(e){!function e(t,r,n){var i=t.split("."),o=i.shift(),a=o.match(/([^\[]+)\[(\d+)]/);if(a){var c=a[1],s=a[2]-0;null==n[c]&&(n[c]=[]),i.length?(null==n[c][s]&&(n[c][s]={}),e(i.join("."),r,n[c][s])):n[c][s]=r}else{var u=o;i.length?(null==n[u]&&(n[u]={}),e(i.join("."),r,n[u])):n[u]=r}}(e,t,this)}else{for(var o in this)this.hasOwnProperty(o)&&delete this[o];assign(this,t)}var a=n,c=n=this.$series(this),s=e.indexOf("[");-1!=s&&(e=e.substring(0,s));for(var u=i.keys(),l=u,p=Array.isArray(l),$=0,l=p?l:l[Symbol.iterator]();;){var f;if(p){if($>=l.length)break;f=l[$++]}else{if($=l.next(),$.done)break;f=$.value}var v=f,d=e.split("."),m=v.split(".");if(0===v.indexOf(e)&&d[d.length-1]===m[d.length-1]){var h=a[v],g=c[v];isEqual(g,h)||this.$fire(v,g,h)}}return t},$watch:function(e,t){var r=this.$where(e);return r.scope===this?i.add(e,t):r.scope.$watch(r.prop,t)},$unwatch:function(e,t){var r=this.$where(e);return r.scope===this?i.remove(e,t):r.scope.$unwatch(r.prop,t)},$fire:function(e,t,r){for(var n=i.find(e),o=n,a=Array.isArray(o),c=0,o=a?o:o[Symbol.iterator]();;){var s;if(a){if(c>=o.length)break;s=o[c++]}else{if(c=o.next(),c.done)break;s=c.value}s(t,r)}},$mount:function(){return n=this.$series(this),this},$unmount:function(){return n=null,i.clear(),this}}),r)}(t.$scope),t.$get=t.$scope.$get.bind(t.$scope),t.$set=t.$scope.$set.bind(t.$scope),t.$watch=t.$scope.$watch.bind(t.$scope),t.$unwatch=t.$scope.$unwatch.bind(t.$scope),t.$fire=t.$scope.$fire.bind(t.$scope),t.$scope},event=function(e){var t,r=e.$ctx,n=new MapList;return r.$on=function(e,t){return n.add(e,t)},r.$off=function(e,t){n.remove(e,t)},r.$listenTo=function(e,t,r){return e.$on(t,r)},r.$listenToOnce=function(e,t,n){var i=null,o=function(){n.apply(this,arguments),i()};return i=r.$listenTo(e,t,o)},r.$stopListening=function(e,t,r){return e.$off(t,r)},r.$fire=function(e,t){for(var i=n.find(e),o=i,a=Array.isArray(o),c=0,o=a?o:o[Symbol.iterator]();;){var s;if(a){if(c>=o.length)break;s=o[c++]}else{if(c=o.next(),c.done)break;s=c.value}if(!1===s.call(r,t))return!1}},r.$emit=function(e,t){var n=r.$parent;if(n){if(!1===n.$fire(e,t))return;n.$emit(e,t)}},r.$broadcast=function(e,t){for(var n=r.$components._instances.values(),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var c=a;if(!1===c.$fire(e,t))break;c.$broadcast(e,t)}},t={$on:r.$on,$off:r.$off,$fire:r.$fire,$emit:r.$emit,$broadcast:r.$broadcast},defineProperty(t,"$fire",r.$fire),defineProperty(t,"$listenTo",r.$listenTo),defineProperty(t,"$listenToOnce",r.listenToOnce),defineProperty(t,"$$stopListening",r.$stopListening),defineProperty(t,"$unmount",function(){n.clear(),n=null}),t},timeout=function(e){var t=e.$ctx,r=[];return t.$timeout=assign(function(e,n){return r.push(window.setTimeout(e.bind(t),n))},{$clear:function(e){window.clearTimeout(e)},$unmount:function(){var e=this;r.forEach(function(t){e.$clear(t)})}}),t.$timeout},interval=function(e){var t=e.$ctx,r=[];return t.$interval=assign(function(e,n){return r.push(window.setInterval(e.bind(t),n))},{$clear:function(e){window.clearInterval(e)},$unmount:function(){var e=this;r.forEach(function(t){e.$clear(t)})}}),t.$interval},http=function(e){var t=e.$ctx;return t.$http=assign(function(e){return $.ajax(e)},{$get:$.get,$post:$.post,$json:$.getJSON,$jsonp:$.ajaxJSONP,$settings:$.ajaxSettings||$.ajaxSetup}),t.$http},find$1=function(e){var t=e.$ctx;return t.$find=function(e){return t.$el.find(e)},t.$find},services={},service=function(e,t){services[e]=t};assign(service,{initial:function(e){e.$services=assign({},services,e.$services);for(var t in e.$services){var r=e.$services[t]({$ctx:e});e.$services[t]=r,r.$mount&&r.$mount({$ctx:e})}},destroy:function(e){for(var t in e.$services){var r=e.$services[t];r.$unmount&&r.$unmount({$ctx:e})}e.$services=null}}),service("$scope",scope),service("$event",event),service("$timeout",timeout),service("$interval",interval),service("$http",http),service("$find",find$1);var ef=function(e){var t=e.$ctx,r=e.$el,n=(e.$arg,e.$directive),i=e.$exp,o=e.$scope,a=deconstruct(i),c=a.prop,s=a.watch,u=r.clone().removeAttr(n),l=r.prev(),p=r.next(),$=r.parent(),f=r,v=function(e){isTrue(e)?(f=u.clone(),p.length&&p.parent().length?f.insertBefore(p):l.length&&l.parent().length?f.insertAfter(l):f.appendTo($),compiler.compile(f,o,t)):compiler.remove(f,t)};if(t.$scope.$get(c)||compiler.remove(r,t),s){var d=null;return{$mount:function(){d=o.$watch(c,v)},$unmount:function(){d()},$el:null}}},repeat=function(e){var t=e.$ctx,r=e.$el,n=(e.$arg,e.$exp),i=e.$scope,o=e.$directive,a=deconstruct(n),c=a.prop,s=a.watch,u=a.secure,l=a.pipes,p=r.clone().removeAttr(o).removeAttr("hi-id"),$=r.prev(),f=r.next(),v=r.parent(),d=c.match(/(\S*)\s+in\s+(\S*)/),m=d[1],h=d[2],g=[],y=[];compiler.remove(r,t);var b=function(){for(var e=g,r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var i;if(r){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var o=i;compiler.remove(o,t)}g=[];for(var a=y,c=Array.isArray(a),s=0,a=c?a:a[Symbol.iterator]();;){var u;if(c){if(s>=a.length)break;u=a[s++]}else{if(s=a.next(),s.done)break;u=s.value}u.$unmount()}y=[]},x=function(e){if(b(),e&&isArray(e)&&e.length){for(var n=0,o=e.length;n<o;n++)!function(r,n){!function(){var n={};isObject(e[r])?n[m]=assign(e[r],{$index:r}):n[m]=e[r];var o=i.$create(n).$mount();y.push(o);var a=p.clone();t.$scope=o,compiler.compile(a,o,t),t.$scope=i,a.attr("hi-compiled","true"),g.push(a)}()}(n);if(r.length&&f.parent().length)for(var a=g,c=Array.isArray(a),s=0,a=c?a:a[Symbol.iterator]();;){var u;if(c){if(s>=a.length)break;u=a[s++]}else{if(s=a.next(),s.done)break;u=s.value}var l=u;l.insertBefore(f)}else if($.length&&$.parent().length)for(var d=g.reverse(),h=Array.isArray(d),x=0,d=h?d:d[Symbol.iterator]();;){var w;if(h){if(x>=d.length)break;w=d[x++]}else{if(x=d.next(),x.done)break;w=x.value}var A=w;A.insertAfter($)}else for(var k=g,S=Array.isArray(k),O=0,k=S?k:k[Symbol.iterator]();;){var _;if(S){if(O>=k.length)break;_=k[O++]}else{if(O=k.next(),O.done)break;_=O.value}var T=_;T.appendTo(v)}}},w=pipe.compile({prop:h,watch:s,secure:u},l,i,x,t);if(x(w(i.$get(h))),s){var A=null;return{$mount:function(){A=i.$watch(h,function(e){x(w(e))})},$unmount:function(){w.destroy(),b(),A()},$el:null}}w.destroy()},on=function(e){var t=e.$ctx,r=e.$el,n=e.$arg,i=e.$exp,o=function(e){t[i](r,e)};return{$mount:function(){r.on(n,o)},$unmount:function(){r.off(n,o)}}},bind=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,r=isObject(r)?r.toString():r,t.html(r)})},text=function(e){var t=e.$ctx,r=e.$el,n=e.$exp,i=e.$scope,o=deconstruct(n),a=o.prop,c=o.watch,s=o.secure,u=o.pipes,l=null,p=function(e){l!==r&&(e=null==e?"":e+"",r.val(s?secureHtml(e):e))},$=function(){l=r,i.$set(a,r.val()),l=null},f=pipe.compile({prop:a,watch:c,secure:s},u,i,p,t);if(p(f(i.$get(a))),c){var v=null;return{$mount:function(){v=i.$watch(a,function(e){p(f(e))}),r.on("input",$),r.on("change",$)},$unmount:function(){v(),r.off("input",$),r.off("change",$),f.destroy()}}}f.destroy()},number$2=text,tel=text,password=text,radio=function(e){var t=e.$ctx,r=e.$el,n=e.$exp,i=e.$scope,o=deconstruct(n),a=o.prop,c=o.watch,s=o.secure,u=o.pipes,l=function(e){e+""===r.val()?r[0].checked=!0:r[0].checked=!1},p=function(){i.$set(a,r.val())},$=pipe.compile({prop:a,watch:c,secure:s},u,i,l,t);if(r[0].checked&&p(),l($(i.$get(a))),c){var f=null;return{$mount:function(){f=i.$watch(a,function(e){l($(e))}),r.on("change",p)},$unmount:function(){f(),r.off("change",p),$.destroy()}}}$.destroy()},checkbox=function(e){var t=e.$ctx,r=e.$el,n=e.$exp,i=e.$scope,o=deconstruct(n),a=o.prop,c=o.watch,s=o.secure,u=o.pipes,l=function(e,t){e=e||[];for(var r=0,n=e.length;r<n;r++)if(e[r]===t+"")return r;return-1},p=function(e){-1!=l(e,r.val())?r[0].checked=!0:r[0].checked=!1},$=function(){var e=i.$get(a)||[];if(r[0].checked)e.push(r.val());else{var t=l(e,r.val());-1!=t&&e.splice(t,1)}i.$set(a,e)},f=pipe.compile({prop:a,watch:c,secure:s},u,i,p,t);if(r[0].checked&&$(),p(f(i.$get(a))),c){var v=null;return{$mount:function(){v=i.$watch(a,function(e){p(f(e))}),r.on("change",$)},$unmount:function(){v(),r.off("change",$),f.destroy()}}}f.destroy()},input=function(e){var t=e.$ctx,r=e.$el,n=e.$exp,i=e.$scope;switch((r.attr("type")||"").toLowerCase()){case"text":return text({$ctx:t,$el:r,$exp:n,$scope:i});case"number":return number$2({$ctx:t,$el:r,$exp:n,$scope:i});case"tel":return tel({$ctx:t,$el:r,$exp:n,$scope:i});case"password":return password({$ctx:t,$el:r,$exp:n,$scope:i});case"radio":return radio({$ctx:t,$el:r,$exp:n,$scope:i});case"checkbox":return checkbox({$ctx:t,$el:r,$exp:n,$scope:i});default:return text({$ctx:t,$el:r,$exp:n,$scope:i})}},textarea=text,select=text,value=function(e){var t=e.$ctx,r=e.$el,n=e.$exp,i=e.$scope;switch(r[0].nodeName.toLowerCase()){case"input":return input({$ctx:t,$el:r,$exp:n,$scope:i});case"textarea":return textarea({$ctx:t,$el:r,$exp:n,$scope:i});case"select":return select({$ctx:t,$el:r,$exp:n,$scope:i})}},show=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,isTrue(r)?t.css("display",""):t.css("display","none")})},hide=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,isTrue(r)?t.css("display","none"):t.css("display","")})},disable=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,isTrue(r)?t.attr("disabled",!0):t.removeAttr("disabled")})},enable=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,isTrue(r)?t.removeAttr("disabled"):t.attr("disabled",!0)})},readonly=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,isTrue(r)?t.attr("readonly","readonly"):t.removeAttr("readonly")})},src=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal,n=e.secure;t.attr("src",n?secureUri(r):r)})},href=function(e){var t=e.$el,r=e.$exp,n=e.$scope,i=e.$ctx;return directive.pattern(r,n,i,function(e){var r=e.newVal,n=e.secure;t.attr("href",n?secureUri(r,["&"]):r)})},klass=function(e){var t=e.$el,r=e.$exp,n=(e.$arg,e.$scope),i=e.$ctx,o=deconstruct(r),a=o.prop,c=o.watch,s=o.secure,u=/\{([\s\S]+)}\[([\s\S]+)]/;if(u.test(a)){var l=a.split(";").map(function(e){if(null!=e&&""!==e){var r=e.match(u),i={};r[1].split(",").forEach(function(e){var t=e.indexOf(":"),r=e.substring(0,t).trim().replace(/^['"]|['"]$/g,""),n=e.substring(t+1).trim().replace(/^['"]|['"]$/g,"");i[r]=n});var o=function(e,r){e=s?secureHtml(i[e]):i[e],r=s?secureHtml(i[r]):i[r],e&&t.addClass(e),r&&t.removeClass(r)};return o(n.$get(r[2])),{prop:r[2],watcher:o}}});if(c){var p=[];return{$mount:function(){for(var e=l,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(r>=e.length)break;i=e[r++]}else{if(r=e.next(),r.done)break;i=r.value}var o=i;if(o){var a=o.prop,c=o.watcher;p.push(n.$watch(a,c))}}},$unmount:function(){for(var e=p,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n()}p=null}}}}else a.split(",").map(function(e){if(null!=e&&""!==e)return directive.pattern(construct(e,c,s),n,i,function(e){var r=e.newVal,n=e.oldVal;r=s?secureHtml(r):r,n=s?secureHtml(n):n,r&&t.addClass(r),n&&t.removeClass(n)})})},attr=function(e){var t=e.$el,r=e.$exp,n=e.$arg,i=e.$scope,o=e.$ctx;return directive.pattern(r,i,o,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,"false"!==r&&r?t.attr(n,r):t.removeAttr(n)})},css=function(e){var t=e.$el,r=e.$exp,n=e.$arg,i=e.$scope,o=e.$ctx;return directive.pattern(r,i,o,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,t.css(n,r)})},data=function(e){var t=e.$el,r=e.$exp,n=e.$arg,i=e.$scope,o=e.$ctx;return directive.pattern(r,i,o,function(e){var r=e.newVal;r=e.secure?secureHtml(r):r,t.attr("data-"+n,r)})},PRIOR={EMERGENCY:-9,DEFAULT:0},priorities=[],directives={},directive=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PRIOR.DEFAULT;-1===include(priorities,r)&&(priorities.push(r),priorities.sort(function(e,t){return e-t})),t.priority=r,directives[e]=t};assign(directive,{PRIOR:PRIOR,initial:function(e){e.$directives=assign({},directives,e.$directives),e.$directives._instances=new MapList},compile:function(e,t,r){var n=function(e,r,n){if(component.isComponent(e,r))return e;var i=getAttrs(e);for(var o in i){var a=void 0,c=void 0,s=o.indexOf(":");-1!=s?(a=o.substring(0,s),c=o.substring(s+1)):(a=o,c=null);var u=r.$directives[a];if(u&&(u.priority||PRIOR.DEFAULT)===n){var l=u({$ctx:r,$el:e,$arg:c,$exp:i[o],$scope:t,$directive:a});l&&(l.$mount&&l.$mount(r),r.$directives._instances.add(element.getId(e,!0),l),void 0!==l.$el&&(e=l.$el))}}return e};return e=priorities.reduce(function(e,t){return e?n(e,r,t):null},e)},pattern:function(e,t,r,n){var i=deconstruct(e),o=i.prop,a=i.watch,c=i.secure,s=i.pipes,u=function(e,t){n({newVal:e,oldVal:t,secure:c})},l=pipe.compile({prop:o,watch:a,secure:c},s,t,u,r);if(u(l(t.$get(o))),a){var p=null;return{$mount:function(){p=t.$watch(o,function(e,t){u(l(e),l(t))})},$unmount:function(){p(),l.destroy()}}}l.destroy()},remove:function(e,t){if(!component.isComponent(e,t)){var r=element.getId(e);if(null!=r){for(var n=t.$directives._instances.find(r),i=n,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(a>=i.length)break;c=i[a++]}else{if(a=i.next(),a.done)break;c=a.value}var s=c;s.$unmount&&s.$unmount(t)}t.$directives._instances.remove(r)}}},destroy:function(e){var t=e.$directives._instances.keys();for(var r in t)for(var n=e.$directives._instances.find(r),i=n,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(a>=i.length)break;c=i[a++]}else{if(a=i.next(),a.done)break;c=a.value}var s=c;s.$unmount&&s.$unmount(this)}e.$directives._instances.clear(),e.$directives._instances=null,e.$directives=null}}),directive("hi-if",ef,directive.PRIOR.EMERGENCY),directive("hi-repeat",repeat,directive.PRIOR.EMERGENCY),directive("hi-on",on),directive("hi-bind",bind),directive("hi-value",value),directive("hi-show",show),directive("hi-hide",hide),directive("hi-disable",disable),directive("hi-enable",enable),directive("hi-readonly",readonly),directive("hi-src",src),directive("hi-href",href),directive("hi-class",klass),directive("hi-attr",attr),directive("hi-css",css),directive("hi-data",data);var bind$2=function(e){var t=e.$exp,r=e.$update,n=e.$scope,i=e.$ctx,o=deconstruct(t),a=o.prop,c=o.watch,s=o.secure,u=o.pipes,l=pipe.compile({prop:a,watch:c,secure:s},u,n,r,i);if(c)return{$mount:function(){n.$watch(a,r)},$unmount:function(){n.$unwatch(a,r),l.destroy()},$iterator:function(e){return e.replace(t,function(){var e=l(n.$get(a));return e=null==e?"":e,s?secureHtml(e):e})}};var p=l(n.$get(a));return p=null==p?"":p,l.destroy(),{$iterator:{$exp:t,$value:s?secureHtml(p):p}}},macros={},macro=function(e,t){macros[e]=t};assign(macro,{initial:function(e){e.$macros=assign({},macros,e.$macros,!0),e.$macros._instances=new MapList},compile:function(e,t,r){if(e.children().length)return e;var n=e.text();if(null==n||""===n)return e;var i=[],o=function(){if(i&&i.length){var t=i.reduce(function(e,t){var r=t.$iterator;return r?$.isFunction(r)?r(e):e.replace(r.$exp,r.$value):e},n);e.html(null==t?"":t)}};for(var a in r.$macros){var c=n.match(new RegExp(a,"gm"));if(c)for(var s=c,u=Array.isArray(s),l=0,s=u?s:s[Symbol.iterator]();;){var p;if(u){if(l>=s.length)break;p=s[l++]}else{if(l=s.next(),l.done)break;p=l.value}var f=p,v=r.$macros[a]({$ctx:r,$el:e,$exp:f,$update:o,$scope:t});$.isFunction(v.$iterator)||(v.$iterator.$exp=f),v.$mount&&v.$mount(r),i.push(v),r.$macros._instances.add(element.getId(e,!0),v)}}return o(),e},remove:function(e,t){if(!component.isComponent(e,t)){var r=element.getId(e);if(null!=r){for(var n=t.$macros._instances.find(r),i=n,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(a>=i.length)break;c=i[a++]}else{if(a=i.next(),a.done)break;c=a.value}var s=c;s.$unmount&&s.$unmount(t)}t.$macros._instances.remove(r)}}},destroy:function(e){var t=e.$macros._instances.keys();for(var r in t)for(var n=e.$macros._instances.find(r),i=n,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(a>=i.length)break;c=i[a++]}else{if(a=i.next(),a.done)break;c=a.value}var s=c;s.$unmount&&s.$unmount(e)}e.$macros._instances.clear(),e.$macros._instances=null,e.$macros=null}}),macro("\\[?\\[\\[([^\\]]+)]]]?|\\{?\\{\\{([^}]+)}}}?",bind$2);var compiler={initial:function(e){return element.initial(e),pipe.initial(e),service.initial(e),directive.initial(e),macro.initial(e),component.initial(e),this},compile:function(e,t,r){return function e(t,r,n){if(t&&t.length)if(component.isComponent(t,n))component.compile(t,n);else if((t=directive.compile(t,r,n))&&(t=macro.compile(t,r,n)))for(var i=Array.prototype.slice.call(t.children()),o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(a>=i.length)break;c=i[a++]}else{if(a=i.next(),a.done)break;c=a.value}var s=c;e($(s),r,n)}}(e,t,r),this},remove:function(e,t){return function e(t,r){if(t&&t.length)if(component.isComponent(t,r))component.remove(t,r);else{for(var n=Array.prototype.slice.call(t.children()),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var c=a;e($(c),r)}macro.remove(t,r),directive.remove(t,r),element.remove(t,r)}}(e,t),this},destroy:function(e){return component.destroy(e),macro.destroy(e),directive.destroy(e),service.destroy(e),pipe.destroy(e),element.destroy(e),this}},View=function(){function e(t){classCallCheck(this,e),assign(this,t),this.$willmount&&this.$willmount(),compiler.initial(this).compile(this.$el,this.$scope,this),this.$mount&&this.$mount(),this.$didmount&&this.$didmount()}return createClass(e,[{key:"$destroy",value:function(){this.$willunmount&&this.$willunmount(),compiler.remove(this.$el,this).destroy(this),this.$unmount&&this.$unmount(),this.$didunmount&&this.$didunmount()}}]),e}();View.extend=extend;var highway=utils.assign(View,{component:component,directive:directive,service:service,macro:macro,pipe:pipe,utils:utils});window.Highway=highway;
//# sourceMappingURL=highway.min.js.map
