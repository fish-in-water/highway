{"version":3,"file":null,"sources":["../src/utils.js","../src/component.js","../src/element.js","../src/pipes/lowercase.js","../src/pipes/uppercase.js","../src/pipes/sort.js","../src/pipes/limit.js","../src/pipes/filter.js","../src/pipes/json.js","../src/pipes/date.js","../src/pipes/number.js","../src/pipe.js","../src/services/scope.js","../src/services/event.js","../src/services/timeout.js","../src/services/interval.js","../src/services/http.js","../src/services/find.js","../src/service.js","../src/directives/if.js","../src/directives/repeat.js","../src/directives/on.js","../src/directives/bind.js","../src/directives/value/input/text.js","../src/directives/value/input/number.js","../src/directives/value/input/tel.js","../src/directives/value/input/password.js","../src/directives/value/input/radio.js","../src/directives/value/input/checkbox.js","../src/directives/value/input/index.js","../src/directives/value/textarea.js","../src/directives/value/select.js","../src/directives/value/index.js","../src/directives/show.js","../src/directives/hide.js","../src/directives/disable.js","../src/directives/enable.js","../src/directives/readonly.js","../src/directives/src.js","../src/directives/href.js","../src/directives/klass.js","../src/directives/attr.js","../src/directives/css.js","../src/directives/data.js","../src/directive.js","../src/macros/bind.js","../src/macro.js","../src/compiler.js","../src/view.js","../src/highway.js","../src/index.js"],"sourcesContent":["//import $ from 'Zepto';\n\n/**\n * noop空函数\n */\nexport const noop = () => {};\n\n/**\n * //获取唯一ID\n * @param prefix 前缀 \n */\nlet counter = 0;\nexport const unique = (prefix) => {\n  return `${prefix || ''}${counter++}`;\n}\n\n/**\n * 深度拷贝\n */\nexport const assign = function() {\n  const args = Array.prototype.slice.call(arguments);\n  if (typeof jQuery != 'undefined') {\n    const deep = args[args.length - 1];\n    if (deep === true || deep === false) {\n      args.pop();\n      args.unshift(deep);\n    }\n  }\n  return $.extend.apply(null, args);\n};\n\n/**\n * 数组中是否包含\n * @param arr \n * @param val \n */\nexport const include = (arr, val) => {\n  for (var i = 0, ii = arr.length; i < ii; i++) {\n    if (arr[i] === val) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * 是否为空白对象\n */\nexport const isPlainObject = $.isPlainObject;\n\n/**\n * 是否是日期\n * @param val \n */\nexport const isDate = (val) => {\n  return val instanceof Date;\n}\n\n/**\n * 是否是数组\n * @param val \n */\nexport const isArray = (val) => {\n  return Object.prototype.toString.call(val) === '[object Array]';\n}\n\n/**\n * 是否是对象\n * @param val \n */\nexport const isObject = (val) => {\n  return val instanceof Object;\n  //return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\n/**\n * 是否是数字\n * @param val \n */\nexport const isNumeric = (val) => {\n  return !isNaN(val);\n}\n\n/**\n * 是否是布尔true\n * @param val \n */\nexport const isTrue = (val) => {\n  return !(\n    val === false ||\n    val === 'false' ||\n    val === '' ||\n    val == null ||\n    (isNumeric(val) && !(val - 0)));\n}\n\n/**\n * 是否相等\n * @param val0 \n * @param val1 \n */\nexport const isEqual = (val0, val1) => {\n  if (!isObject(val0) && !isObject(val1)) {\n    return val0 === val1;\n  }\n\n  // if (isPlainObject(val0) && isPlainObject(val1)) {\n  //   const merge = assign({}, val0, val1, true);\n  //   for (const key in merge) {\n  //     if (merge.hasOwnProperty(key)) {\n  //       if (!isEqual(merge[key], val1[key])) {\n  //         return false;\n  //       }\n  //     }\n  //   }\n  //   return true;\n  // }\n\n  return false;\n}\n\n/**\n * 对象继承\n * @param options \n */\nexport const extend = function (options) {\n  const Parent = this;\n  class Child extends Parent {\n    constructor(options) {\n      super(options);\n    }\n  }\n  assign(Child.prototype, options);\n  return Child;\n}\n\n/**\n * 依赖注入\n * @param handler \n * @param options \n */\nexport const inject = function (handler, options) {\n  const deps = handler.toString().match(/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m)[1].replace(/ /g, '').split(',');\n  const args = (deps || []).map((dep) => {\n    return options[dep];\n  });\n  return () => {\n    return handler.apply(this, args);\n  }\n}\n\n/**\n * MapList映射数组\n */\nexport class MapList {\n  constructor() {\n    this.data = {};\n  }\n\n  /**\n   * add\n   * @param key \n   * @param value \n   */\n  add(key, value) {\n    const data = this.data;\n    const list = data[key] || (data[key] = []);\n    list.push(value);\n    return () => {\n      this.remove(key, value);\n    };\n  }\n\n  /**\n   * remove\n   * @param key \n   * @param value \n   */\n  remove(key, value) {\n    const data = this.data;\n    const list = data[key] || [];\n    for (let i = 0, ii = list.length; i < ii; i++) {\n      const v = list[i];\n      if (v == null) {\n        continue;\n      }\n      if (value == null || v === value) {\n        list.splice(i, 1);\n        i--;\n      }\n    }\n  }\n\n  /**\n   * find\n   * @param key \n   * @param value \n   */\n  find(key, value) {\n    if (key == null) {\n      return [];\n    }\n\n    const data = this.data;\n    const list = data[key] || [];\n    const result = [];\n    for (const v of list) {\n      if (value == null || v === value) {\n        result.push(v);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * clear\n   */\n  clear() {\n    const data = this.data;\n    for (const k in data) {\n      this.remove(k);\n    }\n  }\n\n  /**\n   * keys\n   */\n  keys() {\n    const keys = [];\n    for (const key in this.data) {\n      keys.push(key);\n    }\n    return keys;\n  }\n\n  /**\n   * values\n   */\n  values() {\n    let values = [];\n    for (const key of this.keys()) {\n      values = values.concat(this.find(key));\n    }\n    return values;\n  }\n}\n\n/**\n * 指令解构\n * @param exp \n */\nexport const deconstruct = (exp) => {\n\n\n  /*\n  const exps = exp.trim()\n    .replace(/^[\\{]{2,3}/gi, '')\n    .replace(/^[\\[]{2,3}/gi, '')\n    .replace(/[\\}]{2,3}$/gi, '')\n    .replace(/[\\]]{2,3}$/gi, '')\n    .split('|')\n    .map((attr) => {\n      return attr.trim();\n    });\n\n  const exps = exp.replace(/[\\[\\]\\{\\}]/gi, '').split('|').map((attr) => {\n    return attr.trim();\n  });\n  */\n\n  let watch = false;\n  let secure = true;\n\n  if (/{{{\\s*[\\s\\S]+\\s*}}}/.test(exp)) {   //{{{property}}}\n    exp = exp.trim().replace(/^[\\{]{3}|[\\}]{3}$/gi, '');\n    watch = true;\n    secure = false;\n  } else if (/{{\\s*[\\s\\S]+\\s*}}/.test(exp)) { //{{property}}\n    exp = exp.trim().replace(/^[\\{]{2}|[\\}]{2}$/gi, '');\n    watch = true;\n    secure = true;\n  } else if (/\\[\\[\\[\\s*[\\s\\S]+\\s*]]]/.test(exp)) {  //[[[property]]]\n    exp = exp.trim().replace(/^[\\[]{3}|[\\]]{3}$/gi, '');\n    watch = false;\n    secure = false;\n  } else if (/\\[\\[\\s*[\\s\\S]+\\s*]]/.test(exp)) {   //[[property]]\n    exp = exp.trim().replace(/^[\\[]{2}|[\\]]{2}$/gi, '');\n    watch = false;\n    secure = true;\n  } else {\n    watch = true;\n    secure = false;\n  }\n\n  const exps = exp.split('|').map((attr) => {\n      return attr.trim();\n  });\n\n  return {\n    prop: exps[0],\n    watch,\n    secure,\n    pipes: exps.slice(1)\n  }\n}\n\n/**\n * 指令构建\n * @param exp \n * @param watch \n * @param secure \n */\nexport const construct = (exp, watch, secure) => {\n  exp = (exp || '').trim();\n\n  if (watch) {\n    if (secure) {\n      return `{{${exp}}}`;\n    } else {\n      return `{{{${exp}}}}`;\n    }\n  } else {\n    if (secure) {\n      return `[[${exp}]]`;\n    } else {\n      return `[[[${exp}]]]`;\n    }\n  }\n}\n\n/**\n * 安全html\n * @param html \n */\nexport const secureHtml = (html) => {\n  if (null == html || '' == html) {\n    return html;\n  }\n\n  if (typeof html === 'string') {\n    return html.replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#x27;')\n      .replace(/ /g, '&nbsp;');\n  } else {\n    return html;\n  }\n}\n\n/**\n * 安全html\n * @param html \n */\nexport const secureUri = (html) => {\n  if (null == html || '' == html) {\n    return html;\n  }\n\n  if (typeof html === 'string') {\n    return html.replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#x27;')\n      .replace(/ /g, '&nbsp;');\n  } else {\n    return html;\n  }\n}\n\n/**\n * 获取DOM属性\n * @param \n */\nexport const getAttrs = ($el) => {\n  const attrs = {};\n  const node = $el[0];\n  for (const attr in node.attributes) {\n    if (node.attributes.hasOwnProperty(attr)) {\n      attrs[node.attributes[attr].name] = node.attributes[attr].value;\n    }\n  }\n  return attrs;\n}\n\nexport default {\n  unique,\n  assign,\n  include,\n  isPlainObject,\n  isDate,\n  isArray,\n  isObject,\n  isNumeric,\n  isTrue,\n  //isEqual,\n  //extend,\n  //inject,\n  MapList,\n  deconstruct,\n  construct,\n  secureHtml,\n  secureUri,\n  getAttrs\n}\n","import {assign, getAttrs, MapList} from './utils';\nimport element from './element';\n\n// 全局组件\nconst components = {};\n\n/**\n * 组件模块\n * 组件模块完成视图中组件(子视图)的编译\n * 普通视图通过component模块加载(指定标签名),即变成组件\n * 例如\n * <my-app>\n *   <query>\n *   </query>\n *   <todos>\n *   </todos>\n * </my-app>\n * my-app视图拥有query, todos两个组件\n * 视图的组件化是非常重要的,有效避免重复开发\n * @param name 组件名称\n * @param View 视图\n */\nconst component = (name, View) => {\n  components[name.toLowerCase()] = View;\n};\n\nassign(component, {\n\n\t/**\n   * 组件初始化\n   * @param $ctx\n   */\n  initial($ctx) {\n    //$ctx.$children = [];\n\n    // 完成对全局组件、局部组件加载\n    $ctx.$components = assign({}, components, (() => {\n      const components = {};\n      for (const name in $ctx.$components) {\n        components[name.toLowerCase()] = $ctx.$components[name];\n      }\n      return components;\n    })());\n\n    // 组件实例,便于组件实例的释放销毁\n    $ctx.$components._instances = new MapList;\n\n\t\t/**\n     * 记录子组件引用,通过hi-href='key'命令,达到引用子视图的目的\n     * 例如\n     * <my-app>\n     *   <query hi-href='query'>\n     *   </query>\n     *   <todos hi-href='todos'>\n     *   </todos>\n     * </my-app>\n     * 在my-app视图中,就可以使用this.$components.$refs['query']引用子视图\n     */\n    $ctx.$components.$refs = {};\n  },\n\n\t/**\n   * 编译\n   * @param $el 元素\n   * @param $scope 作用域\n   * @param $ctx 上下文\n   * @returns {*}\n   */\n  compile($el, $ctx) {\n\n    // 最对组件进行编译\n    if (!this.isComponent($el, $ctx)) {\n      return $el;\n    }\n\n    // 根节点就是一个标签\n    if ($el === $ctx.$el) {\n\n      // 创建组件,但是并不认为是子组件\n      this.createComponent($el, $ctx, null);\n    } else {\n\n      // 创建当前视图的子组件\n      const instance = this.createComponent($el, $ctx, $ctx);\n\n      // 保存实例对象,便于整体销毁、局部销毁时释放\n      $ctx.$components._instances.add(element.getId(instance.$el, true), instance);\n\n      // 如有hi-ref指令,则需要在$ctx.$components.$refs中加入,便于视图引用\n      const ref = instance.$el.attr('hi-ref');\n      if (ref) {\n        $ctx.$components.$refs[ref] = instance;\n      }\n    }\n\n    return null;\n  },\n\n\t/**\n   * 是否为组件\n   * 根据DOM对象判断是否为组件\n   * 判断依据主要有两个\n   * 1、 根据当前元素ID在_instances中是否能查询出对象实例(针对已实例化的子组件)\n   * 2、 则标签名是否能在$ctx.$components配置中找到(针对未实例化的子组件)\n   * @param $el 元素\n   * @param $ctx 上下文\n   * @returns {*}\n   */\n  isComponent($el, $ctx) {\n\n    // 在实例中能否根据ID找到\n    const instances = $ctx.$components._instances.find(element.getId($el));\n    if (instances && instances.length) {\n      return true;\n    }\n\n    // 看下标签能否在$ctx.$components中找到\n    const node = $el[0];\n    return node &&\n      node.nodeType === 1 &&\n      !!$ctx.$components[node.tagName.toLowerCase()];\n  },\n\n\t/**\n   * 创建组件\n   * @param $el 元素\n   * @param $ctx 上下文\n   * @param $parent 父视图\n   */\n  createComponent($el, $ctx, $parent) {\n    const tagName = $el[0].tagName.toLowerCase();\n    const View = $ctx.$components[tagName];\n    // hi-component打这个属性为了更容易识别(因为编译后标签名就被替换了)\n    const $new = $('<div></div>').html($el.html())\n      .attr(assign({'hi-component': tagName}, getAttrs($el)));\n    $el.replaceWith($new);\n    const instance = new View({$el: $new, $parent});\n    return instance;\n  },\n\n\t/**\n   * 删除组件\n   * @param $el 元素\n   * @param $ctx 上下文\n   */\n  remove($el, $ctx) {\n\n    // 是否为组件\n    if (!component.isComponent($el, $ctx)) {\n      return;\n    }\n\n    // 根据ID找到实例并销毁\n    const id = element.getId($el);\n    if (id != null) {\n\n      $ctx.$components._instances.find(id).forEach((instance) => {\n        instance.$destroy();\n\n        // 删除引用\n        if (instance.$el) {\n          const ref = instance.$el.attr('hi-ref');\n          if (ref) {\n            delete $ctx.$components.$refs[ref];\n          }\n        }\n\n      });\n      $ctx.$components._instances.remove(id);\n    }\n  },\n\n\t/**\n   * 销毁\n   * @param $ctx 上下文\n   */\n  destroy($ctx) {\n\n    // 所有实例进行销毁\n    $ctx.$components._instances.values().forEach((instance) => {\n      instance.$destroy();\n    });\n  }\n});\n\nexport default component;\n","import {unique, MapList} from './utils';\nimport component from './component';\n\n/**\n * 元素模块\n * 负责对$el的编译处理,同时提供一部分元素相关工具函数\n * @type {{initial: (($ctx)), compile: (($el, $scope, $ctx)), remove: (($el, $ctx)), getId: (($el, generate?)), destroy: (($ctx))}}\n */\nconst element = {\n\t/**\n   * 初始化\n   * @param $ctx 上下文\n   */\n  initial($ctx) {\n    // 如不存在则初始化一个\n    $ctx.$el = $ctx.$el || $('<div></div>');\n\n    // 如果传入$template参数,则进行模板初始化\n    $ctx.$template && $ctx.$el.html($($ctx.$template));\n  },\n\t/**\n   * 删除\n   * @param $el 元素\n   * @param $ctx 上下文\n   */\n  remove($el, $ctx) {\n    $el.remove();\n  },\n\t/**\n   * 获取元素唯一ID\n   * @param $el 元素\n   * @param generate 如不存在ID,是否生成\n   * @returns {*}\n   */\n  getId($el, generate = false) {\n    let id = $el.attr('hi-id');\n    if (generate && id == null) {\n      $el.attr('hi-id', id = unique());\n    }\n    return id;\n  },\n\t/**\n   * 销毁\n   * @param $ctx\n   */\n  destroy($ctx) {\n    $ctx.$el.remove();\n    $ctx.$el = null;\n    $ctx.$template = null;\n  }\n};\n\nexport default element;\n","\n/**\n * lowercase管道\n */\nconst lowercase = () => {\n  return {\n    $iterator($value) {\n      if ($value == null) {\n        return $value;\n      }\n\n      return ($value + '').toLowerCase();\n    }\n  }\n};\n\nexport default lowercase;\n","/**\n * uppercase管道\n */\nconst uppercase = () => {\n  return {\n    $iterator($value) {\n      if ($value == null) {\n        return $value;\n      }\n\n      return ($value + '').toUpperCase();\n    }\n  }\n};\n\nexport default uppercase;\n","import {deconstruct, secureHtml} from '../utils';\n\n/**\n * sort管道\n * @param param0 \n */\nconst sort = ({$source: {\n    prop: sourceProp, watch: sourceWatch, secure: sourceSecure\n  }, $exp, $scope, $pipeline, $update}) => {\n\n  const matches = $exp.match(/(\\S+)\\s+(\\S+)/);\n  const {prop: fieldProp} = deconstruct(matches[1]);\n  const {prop: ascProp} = deconstruct(matches[2] || \"'asc'\");\n  const iterator = ($value) => {\n    const field = $scope.$get(fieldProp);\n    const asc = $scope.$get(ascProp);\n\n    return $value.sort((a, b) => {\n      if (asc === 'asc') {\n        return a[field] > b[field] ? 1 : -1;\n      } else {\n        return a[field] > b[field] ? -1 : 1;\n      }\n\n      // if (a[field] > b[field]) {\n      //   return asc === 'asc' ? 1 : -1;\n      // } else if (a[field] < b[field]) {\n      //   return asc === 'asc' ? 1 : -1;\n      // } else {\n      //   return 0;\n      // }\n    })\n  };\n\n\n  if (sourceWatch) {\n    let fieldUnwatcher;\n    let ascUnwatcher;\n    return {\n      $mount() {\n        fieldUnwatcher = $scope.$watch(fieldProp, () => {\n          $update($pipeline($scope.$get(sourceProp), sourceSecure));\n        });\n\n        ascUnwatcher = $scope.$watch(ascProp, () => {\n          $update($pipeline($scope.$get(sourceProp), sourceSecure));\n        });\n      },\n      $iterator: iterator,\n      $unmount() {\n        fieldUnwatcher();\n        ascUnwatcher();\n      }\n    }\n  } else {\n    return {\n      $iterator: iterator\n    };\n  }\n\n\n};\n\nexport default sort;\n","import {deconstruct, secureHtml, isNumeric} from '../utils';\n\n/**\n * limit管道\n * @param param0 \n */\nconst limit = ({$source: {\n    prop: sourceProp, watch: sourceWatch, secure: sourceSecure\n  }, $exp, $scope, $pipeline, $update}) => {\n\n  const {prop} = deconstruct($exp);\n  const iterator = ($value) => {\n    return ($value || []).slice(0, (isNumeric($exp) ? $exp: $scope.$get($exp)) - 0);\n  };\n\n  if (sourceWatch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, () => {\n          $update($pipeline(sourceProp ? secureHtml($scope.$get(sourceProp)) : $scope.$get(sourceProp)));\n        });\n      },\n      $iterator: iterator,\n      $unmount() {\n        unwatcher();\n      }\n    };\n  } else {\n    return {\n      $iterator: iterator\n    }\n  }\n};\n\nexport default limit;\n","  import {deconstruct, secureHtml, isNumeric} from '../utils';\n\n// =,!=,^=,$=,*=\n\nconst SYMBOLS = {\n  EQUAL: '=',\n  STRICT_EQUAL: '==',\n  NOT_EQUAL: '!=',\n  STRICT_NOT_EQUAL: '!==',\n  START_WITH: '^=',\n  END_WITH: '$=',\n  CONTAINS: '*='\n};\n\n/**\n * filter管道\n * @param param0 \n */\nconst filter = ({$source: {\n  prop: sourceProp, watch: sourceWatch, secure: sourceSecure\n  }, $exp, $scope, $pipeline, $update}) => {\n\n  const conds = $exp.split(/or/i).map((exp) => {\n    const matches = exp.trim().match(/(\\S+)\\s*([=!^$*]+)\\s*(\\S+)/);\n    return {\n      field: deconstruct(matches[1]),\n      symbol: matches[2],\n      value: deconstruct(matches[3])\n    }\n  });\n\n  const satisfy = (obj) => {\n    for (const {field: {prop: fieldProp},\n      symbol,\n      value: {prop: valueProp}} of conds) {\n\n      const prop = $scope.$get(fieldProp);\n      const val = $scope.$get(valueProp);\n\n      if (symbol === SYMBOLS.EQUAL &&\n        obj[prop] == val) {\n        return true;\n      } else if (symbol === SYMBOLS.STRICT_EQUAL &&\n        obj[prop] === val) {\n        return true;\n      } else if (symbol === SYMBOLS.NOT_EQUAL &&\n        obj[prop] != val) {\n        return true;\n      } else if (symbol === SYMBOLS.STRICT_NOT_EQUAL &&\n        obj[prop] !== val) {\n        return true;\n      } else if (symbol === SYMBOLS.START_WITH &&\n        (new RegExp(`^${val}`).test(obj[prop]))) {\n        return true;\n      } else if (symbol === SYMBOLS.END_WITH &&\n        (new RegExp(`${val}$`).test(obj[prop]))) {\n        return true;\n      } else if (symbol === SYMBOLS.CONTAINS &&\n        (new RegExp(`${val}`).test(obj[prop]))) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const iterator = ($value) => {\n    const result = [];\n    for (const item of $value || []) {\n      satisfy(item) && result.push(item);\n    }\n    return result;\n  };\n\n  if (sourceWatch) {\n    let unwatchers = [];\n    return {\n      $mount() {\n        for (const {field: {prop: fieldProp},\n          value: {prop: valueProp}} of conds) {\n\n          unwatchers.push($scope.$watch(fieldProp, () => {\n            $update($pipeline($scope.$get(sourceProp)));\n          }));\n\n          unwatchers.push($scope.$watch(valueProp, () => {\n            $update($pipeline($scope.$get(sourceProp)));\n          }));\n        }\n      },\n      $iterator: iterator,\n      $unmount() {\n        for (const unwatcher of unwatchers) {\n          unwatcher();\n        }\n        unwatchers = null;\n      }\n    };\n  } else {\n    return {\n      $iterator: iterator\n    }\n  }\n};\n\nexport default filter;\n","import {isObject} from '../utils';\n\n/**\n * json管道\n */\nconst json = () => {\n  return {\n    $iterator($value) {\n      if (isObject($value)) {\n        return JSON.stringify($value);\n      } else {\n        return $value;\n      }\n    }\n  }\n};\n\nexport default json;\n","import {isDate, deconstruct, secureHtml} from '../utils';\n\n/**\n * date管道\n * @param param0 \n */\nconst date = ({$source: {\n  prop: sourceProp, watch: sourceWatch, secure: sourceSecure\n  }, $exp, $scope, $pipeline, $update}) => {\n\n  const {prop} = deconstruct($exp);\n  const iterator = ($value) => {\n    if (isDate($value)) {\n      let format = $scope.$get(prop);\n      const obj = {\n        \"M+\": $value.getMonth() + 1,\n        \"d+\": $value.getDate(),\n        \"h+\": $value.getHours(),\n        \"m+\": $value.getMinutes(),\n        \"s+\": $value.getSeconds(),\n        \"q+\": Math.floor(($value.getMonth() + 3) / 3),\n        \"S\": $value.getMilliseconds()\n      };\n\n      if (/(y+)/.test(format)) {\n        format = format.replace(RegExp.$1, ($value.getFullYear() + '').substr(4 - RegExp.$1.length));\n      }\n\n      for (const key in obj) {\n        if (new RegExp(\"(\" + key + \")\").test(format)) {\n          format = format.replace(RegExp.$1, (RegExp.$1.length == 1) ?\n            (obj[k]) : ((\"00\" + obj[key]).substr((\"\" + obj[key]).length)));\n        }\n      }\n\n      return format;\n      //return JSON.stringify($value);\n    } else {\n      return $value;\n    }\n  };\n\n  if (sourceWatch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, () => {\n          $update($pipeline(sourceProp ? secureHtml($scope.$get(sourceProp)) : $scope.$get(sourceProp)));\n        });\n      },\n      $iterator: iterator,\n      $unmount() {\n        unwatcher();\n      }\n    };\n  } else {\n    return {\n      $iterator: iterator\n    }\n  }\n};\n\nexport default date;\n","import {deconstruct, secureHtml, isNumeric} from '../utils';\n\n/**\n * number管道\n * @param param0 \n */\nconst number = ({$source: {\n  prop: sourceProp, watch: sourceWatch, secure: sourceSecure\n  }, $exp, $scope, $pipeline, $update}) => {\n\n  const {prop} = deconstruct($exp);\n  const iterator = ($value) => {\n    if (isNumeric($value)) {\n      return ($value).toFixed($scope.$get($exp) - 0);\n    } else {\n      return $value;\n    }\n  };\n\n  if (sourceWatch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, () => {\n          $update($pipeline(sourceProp ? secureHtml($scope.$get(sourceProp)) : $scope.$get(sourceProp)));\n        });\n      },\n      $iterator: iterator,\n      $unmount() {\n        unwatcher();\n      }\n    };\n  } else {\n    return {\n      $iterator: iterator\n    }\n  }\n};\n\nexport default number;\n","import {assign, unique, MapList} from './utils';\n\n// 全局管道指令\nconst pipes = {};\n\n/**\n * 管道\n * 利用管道符“|”将两个命令隔开，管道符左边命令的输出就会作为管道符右边命令的输入。\n * 连续使用管道意味着第一个命令的输出会作为第二个命令的输入，第二个命令的输出又会作为第三个命令的输入，依此类推。\n * 例如: {{'name | uppercase'}}\n * @param name 管道名称\n * @param factory 工厂函数\n */\nconst pipe = (name, factory) => {\n  pipes[name] = factory;\n};\n\nassign(pipe, {\n\n\t/**\n   * 初始化,在编译器初始化时调用\n   * @param $ctx 上下文\n   */\n  initial($ctx) {\n\n    // 加载全局管道、局部管道至当前上下文\n    $ctx.$pipes = assign({}, pipes, $ctx.$pipes);\n\n    // 记录管道实例,便于销毁释放\n    $ctx.$pipes._instances = new MapList;\n  },\n\t/**\n   * 管道编译\n   * @param $source 原始字段\n   * @param $pipes 管道组\n   * @param $scope 作用域\n   * @param $update 更新函数\n   * @param $ctx 上下文\n   * 例如{{name | uppercase | lowercase}}中\n   * $source = name\n   * $pipes = ['uppercase', 'lowercase']\n   * $update函数句柄,调用该函数触发更新,用于管道中的双向绑定\n\t */\n  compile($source, $pipes, $scope, $update, $ctx) {\n\n    const id = unique('p');\n\n\t\t/**\n     * 管道线\n     * 在一个指令中可能有多个管道,例如{{name | uppercase | lowercase}}\n     * @param value\n     * @returns {*}\n     */\n    const pipeline = (value) => {\n\n\t\t\t// 触发所有宏指令替换,获得结果字符串\n      return $ctx.$pipes._instances.find(id).reduce((value, instance) => {\n        return instance.$iterator(value)\n      }, value);\n    };\n\n\t\t/**\n     * 对指令中的管道进行编译\n     */\n    for (const pipe of $pipes) {\n      let name, exp;\n      const index = pipe.indexOf(':');\n      if (index != -1) {\n        name = pipe.substring(0, index).trim();\n        exp = pipe.substring(index + 1).trim();\n      } else {\n        name = pipe;\n        exp = null;\n      }\n\n\t\t\t/**\n       * 获取管道实例\n       * 以income | number: fixedField 为例\n       * 如income = 1000, fixedField = 2, 结果1000.00\n       */\n      const instance = $ctx.$pipes[name]({\n        $source, //原始字段。 示例值: income\n        $ctx, // 上下文\n        $scope, // 作用域\n        //$pipe: name, // 管道名称。示例值: number\n        $exp: exp, // 表达式。示例值: fixedField字段\n        $update, // 更新函数。如需要,管道同样可以进行双向绑定,当管道发生变化时,触发update函数\n        $pipeline: pipeline //管道线\n      });\n\n      if (instance) {\n        // $mount hook\n        instance.$mount && instance.$mount($ctx);\n\n        // 增加管道实例\n        $ctx.$pipes._instances.add(id, instance);\n      }\n    }\n\n    // 返回管道线,使调用方可以保持管道线实例\n    return assign(pipeline, {\n\t\t\t/**\n       * 赋予管道线实例销毁能力\n       * 当管道线不需要时候,可主动销毁\n       */\n      destroy: () => {\n        const instances = $ctx.$pipes._instances.find(id);\n        for (const instance of instances) {\n          instance.$unmount && instance.$unmount($ctx);\n        }\n        $ctx.$pipes._instances.remove(id);\n      }\n    })\n  },\n\n\t/**\n   * 销毁\n   * @param $ctx\n   */\n  destroy($ctx) {\n    $ctx.$pipes._instances.clear();\n    $ctx.$pipes._instances = null;\n    $ctx.$pipes = null;\n  }\n});\n\nexport default pipe;\n\n// 内建管道\nimport lowercase from './pipes/lowercase';\nimport uppercase from './pipes/uppercase';\nimport sort from './pipes/sort';\nimport limit from './pipes/limit';\nimport filter from './pipes/filter';\nimport json from './pipes/json';\nimport date from './pipes/date';\nimport number from './pipes/number';\n\npipe('lowercase', lowercase);\npipe('uppercase', uppercase);\npipe('sort', sort);\npipe('limit', limit);\npipe('filter', filter);\npipe('json', json);\npipe('date', date);\npipe('number', number);\n","import {assign, isArray, isObject, isDate, isEqual, secureHtml, MapList} from '../utils';\nimport pipe from '../pipe';\n\n/**\n * scope服务\n * @param param0 \n */\nconst scope = ({$ctx}) => {\n  const factory = (obj) => {\n    let series = {};\n    let watchers = new MapList;\n\n    return assign(Object.create({\n\n      $create(obj) {\n        const scope = factory(obj);\n        scope.$parent = this;\n        return scope;\n      },\n\n      $series(data) {\n        const series = {};\n\n        const iterator = (prop, data) => {\n\n          series[prop] = data;\n\n          if (isArray(data)) {\n            for (let i = 0, ii = data.length; i < ii; i++) {\n              const prop2 = prop + `[${i}]`;\n              series[prop2] = data[i];\n              iterator(prop + `[${i}]`, data[i]);\n            }\n          } else if (isObject(data)) {\n            for (const key in data) {\n              if (data.hasOwnProperty(key)) {\n                const childProp = prop ? `${prop}.${key}` : `${key}`;\n                iterator(childProp, data[key]);\n              }\n            }\n          }\n        };\n\n        iterator('', data);\n\n        return series;\n      },\n\n      $where(prop = '') {\n        if (!prop) {\n          return {\n            scope: this,\n            prop\n          }\n        }\n\n        const matches = prop.match(/^(?:\\$parent).([\\s\\S]*)/);\n        if (matches) {\n          return {\n            scope: $ctx.$parent.$scope,\n            prop: matches[1]\n          }\n        }\n\n        // scope chains\n        //const first = prop.match(/^([^.\\[\\]])+/)[0];\n        //if (typeof series[first] === 'undefined' && this.$parent) {\n        //  return {\n        //    scope: $ctx.$parent.$scope,\n        //    prop\n        //  }\n        //}\n\n        return {\n          scope: this,\n          prop\n        }\n      },\n\n      $get(prop = '') {\n        const matches = prop.match(/^['\"]([\\s\\S]*)['\"]$/)\n        if (matches) {\n          return matches[1];\n        }\n\n        const where = this.$where(prop);\n        if (where.scope === this) {\n          const val = (() => {\n            let val = series[prop];\n            let scope = this;\n            while (typeof val === 'undefined' && scope.$parent) {\n              scope = scope.$parent;\n              val = scope.$get(prop);\n            }\n\n            return val;\n          }).call(this);\n\n\n          if (isObject(val)) {\n            if (isDate(val)) {\n              return new Date(val);\n            } else if (isArray(val)) {\n              return assign([], val, true);\n            }  else {\n              return assign({}, val, true);\n            }\n          } else {\n            return val;\n          }\n          /*\n          if (isDate(val)) {\n            return new Date(val);\n          } else if (isArray(val)) {\n            return assign([], val);\n          } else if (isObject(val)) {\n            return assign({}, val);\n          } else {\n            return val;\n          }\n          */\n        } else {\n          return where.scope.$get(where.prop);\n        }\n      },\n\n      $set(prop = '', newVal = void 0) {\n        const matches = prop.match(/^['\"]([\\s\\S]*)['\"]$/)\n        if (matches) {\n          return matches[1];\n        }\n\n        if (prop) {\n          const iterator = (path, val, obj) => {\n            const props = path.split('.');\n            const tmp = props.shift();\n            const matches = tmp.match(/([^\\[]+)\\[(\\d+)]/);\n            //array\n            if (matches) {\n              const prop = matches[1];\n              const index = matches[2] - 0;\n              if (obj[prop] == null) {\n                obj[prop] = [];\n              }\n\n              if (!props.length) {\n                obj[prop][index] = val;\n              } else {\n                if (obj[prop][index] == null) {\n                  obj[prop][index] = {};\n                }\n                iterator(props.join('.'), val, obj[prop][index]);\n              }\n            } else {\n              const prop = tmp;\n              if (!props.length) {\n                obj[prop] = val;\n              } else {\n                if (obj[prop] == null) {\n                  obj[prop] = {};\n                }\n                iterator(props.join('.'), val, obj[prop]);\n              }\n            }\n          };\n\n          iterator(prop, newVal, this);\n\n        } else {\n          for (const key in this) {\n            if (this.hasOwnProperty(key)) {\n              delete this[key];\n            }\n          }\n\n          assign(this, newVal);\n        }\n\n        const oldSeries = series;\n        const newSeries = series = this.$series(this);\n\n        //const reg = new RegExp(`^${prop}`);\n        const arrayIndex = prop.indexOf('[');\n        if (-1 != arrayIndex) {\n          prop = prop.substring(0, arrayIndex);\n        }\n\n        const keys = watchers.keys();\n        for (const key of keys) {\n          const props = prop.split('.');\n          const keys = key.split('.');\n\n          if (0 === key.indexOf(prop) &&\n            props[props.length - 1] === keys[props.length - 1]) {\n\n            const oldValue = oldSeries[key];\n            const newValue = newSeries[key];\n\n            if (!isEqual(newValue, oldValue)) {\n              this.$fire(key, newValue, oldValue);\n            }\n          }\n        }\n\n        return newVal;\n      },\n\n      $watch(prop, handler) {\n        const where = this.$where(prop);\n        if (where.scope === this) {\n          return watchers.add(prop, handler);\n        } else {\n          return where.scope.$watch(where.prop, handler);\n        }\n      },\n\n      $unwatch(prop, handler) {\n        const where = this.$where(prop);\n        if (where.scope === this) {\n          return watchers.remove(prop, handler);\n        } else {\n          return where.scope.$unwatch(where.prop, handler);\n        }\n      },\n\n      $fire(prop, newVal, oldVal) {\n        const handlers = watchers.find(prop);\n        for (const handler of handlers) {\n          handler(newVal, oldVal);\n        }\n      },\n\n      // $pipe(val, pipes) {\n      //   return pipe.compile(val, pipes, $ctx);\n      // },\n\n      $mount() {\n        series = this.$series(this);\n        return this;\n      },\n\n      $unmount() {\n        series = null;\n        watchers.clear();\n        return this;\n      }\n    }), obj);\n  };\n\n  $ctx.$scope = factory($ctx.$scope);\n  $ctx.$get = $ctx.$scope.$get.bind($ctx.$scope);\n  $ctx.$set = $ctx.$scope.$set.bind($ctx.$scope);\n  $ctx.$watch = $ctx.$scope.$watch.bind($ctx.$scope);\n  $ctx.$unwatch = $ctx.$scope.$unwatch.bind($ctx.$scope);\n  $ctx.$fire = $ctx.$scope.$fire.bind($ctx.$scope);\n\n  return $ctx.$scope;\n};\n\nexport default scope;\n","import {MapList} from '../utils';\n\n/**\n * 事件服务\n * @param {*} param0 \n */\nconst event = ({$ctx}) => {\n  let events = new MapList;\n\n  $ctx.$on = (name, handler) => {\n    return events.add(name, handler);\n  };\n\n  $ctx.$off = (name, handler) => {\n    events.remove(name, handler);\n  };\n\n  $ctx.$listenTo = (obj, name, handler) => {\n    return obj.$on(name, handler);\n  };\n\n  $ctx.$listenToOnce = (obj, name, handler) => {\n    let stopper = null;\n    const once = function () {\n      handler.apply(this, arguments);\n      stopper();\n    };\n\n    return stopper = $ctx.$listenTo(obj, name, once);\n  };\n\n  $ctx.$stopListening = (obj, name, handler) => {\n    return obj.$off(name, handler);\n  };\n\n  $ctx.$fire = (name, data) => {\n    const handlers = events.find(name);\n    for (const handler of handlers) {\n      if (handler.call($ctx, data) === false) {\n        return false;\n      }\n    }\n  };\n\n  $ctx.$emit = (name, data) => {\n    const parent = $ctx.$parent;\n    if (parent) {\n      if (parent.$fire(name, data) === false) {\n        return;\n      }\n      parent.$emit(name, data);\n    }\n  };\n\n  $ctx.$broadcast = (name, data) => {\n    for (const child of $ctx.$components._instances.values()) {\n      if (child.$fire(name, data) === false) {\n        break;\n      }\n      child.$broadcast(name, data);\n    }\n  };\n\n  return {\n    $on: $ctx.$on,\n    $off: $ctx.$off,\n    $fire: $ctx.$fire,\n    $emit: $ctx.$emit,\n    $broadcast: $ctx.$broadcast,\n    $fire: $ctx.$fire,\n    $listenTo: $ctx.$listenTo,\n    $listenToOnce: $ctx.listenToOnce,\n    $$stopListening: $ctx.$stopListening,\n    $unmount: () => {\n      events.clear();\n      events = null;\n    }\n  }\n};\n\nexport default event;\n","import {assign} from '../utils';\n\n/**\n * timeout服务\n * @param param0 \n */\nconst timeout = ({$ctx}) => {\n  const ids = [];\n\n  $ctx.$timeout = assign((handler, delay) => {\n    return ids.push(window.setTimeout(handler.bind($ctx), delay));\n  }, {\n    $clear(id) {\n      window.clearTimeout(id);\n    },\n    $unmount() {\n      ids.forEach((id) => {\n        this.$clear(id);\n      })\n    }\n  });\n\n  return $ctx.$timeout;\n};\n\nexport default timeout;\n","import {assign} from '../utils';\n\n/**\n * interval服务\n * @param {*} param0 \n */\nconst interval = ({$ctx}) => {\n  const ids = [];\n\n  $ctx.$interval = assign((handler, delay) => {\n    return ids.push(window.setInterval(handler.bind($ctx), delay));\n  }, {\n    $clear(id) {\n      window.clearInterval(id);\n    },\n    $unmount() {\n      ids.forEach((id) => {\n        this.$clear(id);\n      })\n    }\n  });\n\n  return $ctx.$interval;\n};\n\nexport default interval;\n","import {assign} from '../utils';\n//import $ from 'Zepto';\n\n/**\n * http服务\n * @param param0 \n */\nconst http = ({$ctx}) => {\n  $ctx.$http = assign((options) => {\n    return $.ajax(options);\n  }, {\n    $get: $.get,\n    $post: $.post,\n    $json: $.getJSON,\n    $jsonp: $.ajaxJSONP,\n    $settings: $.ajaxSettings || $.ajaxSetup\n  });\n\n  return $ctx.$http;\n};\n\nexport default http;\n","import {assign} from '../utils';\n\n/**\n * find服务\n * @param param0 \n */\nconst find = ({$ctx}) => {\n  $ctx.$find = (selector) => {\n    return $ctx.$el.find(selector)\n  };\n  return $ctx.$find;\n};\n\nexport default find;\n","import {assign} from './utils';\n\nconst services = {};\n\n/**\n * 服务模块\n * @param name 服务名\n * @param factory 工厂函数\n */\nconst service = (name, factory) => {\n  services[name] = factory;\n};\n\nassign(service, {\n  initial($ctx) {\n    $ctx.$services = assign({}, services, $ctx.$services);\n    for (const name in $ctx.$services) {\n      const instance = $ctx.$services[name]({$ctx});\n      $ctx.$services[name] = instance;\n      instance.$mount && instance.$mount({$ctx});\n    }\n  },\n  //compile($el, $scope, $ctx) {\n\t//\n  //},\n  destroy($ctx) {\n    for (const name in $ctx.$services) {\n      const instance = $ctx.$services[name];\n      instance.$unmount && instance.$unmount({$ctx});\n    }\n\n    $ctx.$services = null;\n  }\n});\n\nexport default service;\n\n// install build-in\nimport scope from './services/scope';\nimport event from './services/event';\nimport timeout from './services/timeout';\nimport interval from './services/interval';\nimport http from './services/http';\nimport find from './services/find';\n\nservice('$scope', scope);\nservice('$event', event);\nservice('$timeout', timeout);\nservice('$interval', interval);\nservice('$http', http);\nservice('$find', find);\n\n","import {deconstruct, secureHtml, isTrue} from '../utils';\nimport compiler from '../compiler';\nimport element from '../element';\nimport directive from '../directive';\n\n/**\n * if指令\n * @param param0 \n */\nconst ef = ({$ctx, $el, $arg, $directive, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  const {prop, watch} = deconstruct($exp);\n  const $clone = $el.clone().removeAttr($directive);\n  const $prev = $el.prev();\n  const $next = $el.next();\n  const $parent = $el.parent();\n  let $new = $el;\n  const watcher = (value) => {\n\n    if (isTrue(value)) {\n      $new = $clone.clone();\n      if ($next.length && $next.parent().length) {\n        $new.insertBefore($next);\n      } else if ($prev.length && $prev.parent().length) {\n        $new.insertAfter($prev);\n      } else {\n        $new.appendTo($parent);\n      }\n\n      compiler.compile($new, $scope, $ctx);\n      //$ctx.$compile($new);\n      //\n\n      //$scope.$unwatch(prop, watcher);\n    } else {\n      compiler.remove($new, $ctx);\n      //$ctx.$remove($new);\n      //$scope.$watch(prop, watcher);\n    }\n  };\n\n  if (!$ctx.$scope.$get(prop)) {\n    compiler.remove($el, $ctx);\n    //$ctx.$remove($el);\n  }\n\n  if (watch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, watcher);\n      },\n      $unmount() {\n        unwatcher();\n      },\n      $el: null\n    };\n  }\n};\n\nexport default ef;\n","import {deconstruct, secureHtml, isArray, isObject, assign} from '../utils';\nimport compiler from '../compiler';\nimport pipe from '../pipe';\n\nlet counter = 0;\n\n/**\n * repeat指令\n * @param param0 \n */\nconst repeat = ({$ctx, $el, $arg, $exp, $scope, $directive}) => {\n  const {prop, watch, secure, pipes} = deconstruct($exp);\n\n  const $clone = $el.clone().removeAttr($directive).removeAttr('hi-id');\n  const $prev = $el.prev();\n  const $next = $el.next();\n  const $parent = $el.parent();\n  const matches = prop.match(/(\\S*)\\s+in\\s+(\\S*)/);\n  const itemProp = matches[1];\n  const arrayProp = matches[2];\n  let $els = [];\n  let scopes = [];\n\n  // remove current el\n  //$ctx.$remove($el);\n  compiler.remove($el, $ctx);\n\n  const clear = () => {\n    // clear els\n    for (const $el of $els) {\n      //$ctx.$remove($el);\n      compiler.remove($el, $ctx);\n    }\n    $els = [];\n\n    // clear scopes\n    for (const scope of scopes) {\n      scope.$unmount();\n    }\n    scopes = [];\n  };\n\n  const watcher = (value) => {\n    clear();\n\n    if (value && isArray(value) && value.length) {\n      for (let i = 0, ii = value.length; i < ii; i++) {\n\n        (() => {\n          const data = {};\n          if (isObject(value[i])) {\n            data[itemProp] = assign(value[i], {$index: i});\n          } else {\n            data[itemProp] = value[i];\n          }\n\n          // create new scope\n          const scope = $scope.$create(data).$mount();\n          //scope.$parent = $scope;\n          scopes.push(scope);\n\n          // create new element\n          const $el = $clone.clone();\n\n          // compile\n          $ctx.$scope = scope;\n\n          compiler.compile($el, scope, $ctx);\n          $ctx.$scope = $scope;\n\n          //$ctx.$compile($el, scope);\n\n          $el.attr('hi-compiled', 'true');\n\n          $els.push($el);\n\n        })();\n      }\n\n      if ($el.length && $next.parent().length) {\n        for (const $el of $els) {\n          $el.insertBefore($next);\n        }\n      } else if ($prev.length && $prev.parent().length) {\n        for (const $el of $els.reverse()) {\n          $el.insertAfter($prev);\n        }\n      } else {\n        for (const $el of $els) {\n          $el.appendTo($parent);\n        }\n      }\n    }\n  };\n\n  const pipeline = pipe.compile({\n    prop: arrayProp, watch, secure\n  }, pipes, $scope, watcher, $ctx);\n\n  watcher(pipeline($scope.$get(arrayProp)));\n\n  if (watch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(arrayProp, (value) => {\n          watcher(pipeline(value))\n        });\n      },\n      $unmount() {\n\n        pipeline.destroy();\n\n        clear();\n\n        unwatcher();\n      },\n      $el: null\n    };\n  } else {\n    pipeline.destroy();\n  }\n};\n\nexport default repeat;\n","\n/**\n * on指令\n * @param param0 \n */\nconst on = ({$ctx, $el, $arg, $exp}) => { //$ctx, $el, $arg, $exp\n  const handler = ($ev) => {\n    $ctx[$exp]($el, $ev);\n  };\n\n  return {\n    $mount() {\n      $el.on($arg, handler);\n    },\n    $unmount() {\n      $el.off($arg, handler);\n    }\n  }\n};\n\nexport default on;\n","import directive from '../directive';\nimport {secureHtml, isObject, isEqual, deconstruct} from '../utils';\n\n/**\n * bind指令\n * @param param0 \n */\nconst bind = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    newVal = isObject(newVal) ? newVal.toString() : newVal;\n    $el.html(newVal);\n  });\n};\n\nexport default bind;\n","import pipe from '../../../pipe';\nimport {deconstruct, secureHtml} from '../../../utils';\n\n/**\n * value指令:text\n * @param param0 \n */\nconst text = ({$ctx, $el, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  const {prop, watch, secure, pipes} = deconstruct($exp);\n  let $srcEl = null;\n  const watcher = (value) => {\n    if ($srcEl === $el) {\n      return;\n    }\n\n    value = value == null ? '' : value + '';\n    $el.val(secure ? secureHtml(value) : value);\n  };\n  const inputer = () => {\n    $srcEl = $el;\n    $scope.$set(prop, $el.val());\n    $srcEl = null;\n  };\n  const pipeline = pipe.compile({\n    prop: prop, watch, secure\n  }, pipes, $scope, watcher, $ctx);\n\n  watcher(pipeline($scope.$get(prop)));\n\n  if (watch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, (value) => {\n          watcher(pipeline(value));\n        });\n        $el.on('input', inputer);\n        $el.on('change', inputer);\n      },\n      $unmount() {\n        unwatcher();\n        $el.off('input', inputer);\n        $el.off('change', inputer);\n        pipeline.destroy();\n      }\n    };\n  } else {\n    pipeline.destroy();\n  }\n};\n\nexport default text;\n","import text from './text';\n\n/**\n * value指令:number\n */\nconst number = text;\n\nexport default number;\n\n","import text from './text';\n\n/**\n * value指令:tel\n */\nconst tel = text;\n\nexport default tel;\n\n","import text from './text';\n\n/**\n * value指令:password\n */\nconst password = text;\n\nexport default password;\n\n","import pipe from '../../../pipe';\nimport {deconstruct, secureHtml} from '../../../utils';\n\n/**\n * value指令:radio\n * @param param0 \n */\nconst radio = ({$ctx, $el, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  const {prop, watch, secure, pipes} = deconstruct($exp);\n  const watcher = (value) => {\n\n    if (value + '' === $el.val()) {\n      //$el.attr('checked', true);\n      $el[0].checked = true;\n    } else {\n      $el[0].checked = false;\n    }\n  };\n  const inputer = () => {\n    $scope.$set(prop, $el.val());\n  };\n  const pipeline = pipe.compile({\n    prop: prop, watch, secure\n  }, pipes, $scope, watcher, $ctx);\n\n  // if already checked\n  if ($el[0].checked) {\n    inputer();\n  }\n\n  watcher(pipeline($scope.$get(prop)));\n\n  if (watch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, (value) => {\n          watcher(pipeline(value));\n        });\n        $el.on('change', inputer);\n      },\n      $unmount() {\n        unwatcher();\n        $el.off('change', inputer);\n        pipeline.destroy();\n      }\n    };\n  } else {\n    pipeline.destroy();\n  }\n};\n\nexport default radio;\n","import pipe from '../../../pipe';\nimport {deconstruct, secureHtml} from '../../../utils';\n\n/**\n * value指令:checkbox\n * @param param0 \n */\nconst checkbox = ({$ctx, $el, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  const {prop, watch, secure, pipes} = deconstruct($exp);\n\n  const indexOf = (values, value) => {\n    values = values || [];\n    for (let i = 0, ii = values.length; i < ii; i++) {\n      if (values[i] === value + '') {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  const watcher = (values) => {\n    if (-1 != indexOf(values, $el.val())) {\n      $el[0].checked = true;\n    } else {\n      $el[0].checked = false;\n    }\n  };\n  const inputer = () => {\n    const values = $scope.$get(prop) || [];\n    if ($el[0].checked) {\n      values.push($el.val());\n    } else {\n\n      const index = indexOf(values, $el.val());\n      if (-1 != index) {\n        values.splice(index, 1);\n      }\n    }\n\n    $scope.$set(prop, values)\n  };\n  const pipeline = pipe.compile({\n    prop: prop, watch, secure\n  }, pipes, $scope, watcher, $ctx);\n\n  // if already checked\n  if ($el[0].checked) {\n    inputer();\n  }\n\n  watcher(pipeline($scope.$get(prop)));\n\n  if (watch) {\n    let unwatcher = null;\n    return {\n      $mount() {\n        unwatcher = $scope.$watch(prop, (value) => {\n          watcher(pipeline(value));\n        });\n        $el.on('change', inputer);\n      },\n      $unmount() {\n        unwatcher();\n        $el.off('change', inputer);\n        pipeline.destroy();\n      }\n    };\n  } else {\n    pipeline.destroy();\n  }\n};\n\nexport default checkbox;\n","import text from './text';\nimport number from './number';\nimport tel from './tel';\nimport password from './password';\nimport radio from './radio';\nimport checkbox from './checkbox';\n\n/**\n * value指令:input\n * @param param0 \n */\nconst input = ({$ctx, $el, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  switch (($el.attr('type') || '').toLowerCase()) {\n    case 'text':\n      return text({$ctx, $el, $exp, $scope});\n    case 'number':\n      return number({$ctx, $el, $exp, $scope});\n    case 'tel':\n      return tel({$ctx, $el, $exp, $scope});\n    case 'password':\n      return password({$ctx, $el, $exp, $scope});\n    case 'radio':\n      return radio({$ctx, $el, $exp, $scope});\n    case 'checkbox':\n      return checkbox({$ctx, $el, $exp, $scope});\n    default :\n      return text({$ctx, $el, $exp, $scope});\n  }\n};\n\nexport default input;\n","import text from './input/text';\n\n/**\n * value指令:textarea\n */\nconst textarea = text;\n\nexport default textarea;\n\n","import text from './input/text';\n\n/**\n * value指令:select\n */\nconst select = text;\n\nexport default select;\n\n","import input from './input/index';\nimport textarea from './textarea';\nimport select from './select';\n\n/**\n * value指令\n * @param param0 \n */\nconst value = ({$ctx, $el, $exp, $scope}) => { //$ctx, $el, $arg, $exp\n  switch ($el[0].nodeName.toLowerCase()) {\n    case 'input':\n      return input({$ctx, $el, $exp, $scope});\n    case 'textarea':\n      return textarea({$ctx, $el, $exp, $scope});\n    case 'select':\n      return select({$ctx, $el, $exp, $scope});\n  }\n};\n\nexport default value;\n","import directive from '../directive';\nimport {secureHtml, isTrue} from '../utils';\n\n/**\n * show指令\n * @param param0 \n */\nconst show = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (isTrue(newVal)) {\n      $el.css('display', '');\n    } else {\n      $el.css('display', 'none');\n    }\n  });\n};\n\nexport default show;\n","import directive from '../directive';\nimport {secureHtml, isTrue} from '../utils';\n\n/**\n * hide指令\n * @param param0 \n */\nconst hide = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (!isTrue(newVal)) {\n      $el.css('display', '');\n    } else {\n      $el.css('display', 'none');\n    }\n  });\n};\n\nexport default hide;\n","import directive from '../directive';\nimport {secureHtml, isTrue} from '../utils';\n\n/**\n * disable指令\n * @param param0 \n */\nconst disable = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (isTrue(newVal)) {\n      $el.attr('disabled', true);\n    } else {\n      $el.removeAttr('disabled');\n    }\n  });\n};\n\nexport default disable;\n","import directive from '../directive';\nimport {secureHtml, isTrue} from '../utils';\n\n/**\n * enable指令\n * @param param0 \n */\nconst enable = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (isTrue(newVal)) {\n      $el.removeAttr('disabled');\n    } else {\n      $el.attr('disabled', true);\n    }\n  });\n};\n\nexport default enable;\n","import directive from '../directive';\nimport {secureHtml, isTrue} from '../utils';\n\n/**\n * readonly指令\n * @param param0 \n */\nconst readonly = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (isTrue(newVal)) {\n      $el.attr('readonly', 'readonly');\n    } else {\n      $el.removeAttr('readonly');\n    }\n  });\n};\n\nexport default readonly;\n","import directive from '../directive';\nimport {secureUri} from '../utils';\n\n/**\n * src指令\n * @param param0 \n */\nconst src = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    $el.attr('src', secure ? secureUri(newVal) : newVal);\n  });\n};\n\nexport default src;\n","import directive from '../directive';\nimport {secureUri} from '../utils';\n\n/**\n * href指令\n * @param param0 \n */\nconst href = ({$el, $exp, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    $el.attr('href', secure ? secureUri(newVal, ['&']) : newVal);\n  });\n};\n\nexport default href;\n","import directive from '../directive';\nimport {secureHtml, deconstruct, construct} from '../utils';\n\n/**\n * class指令\n * @param param0 \n */\nconst klass = ({$el, $exp, $arg, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  const {prop, watch, secure} = deconstruct($exp);\n  const regexp = /\\{([\\s\\S]+)}\\[([\\s\\S]+)]/;\n\n  // mapping\n  if (regexp.test(prop)) {\n    const instances = prop.split(';').map((klass) => {\n      if (klass == null || klass === '') {\n        return;\n      }\n\n      const matches = klass.match(regexp);   //{'red': 'bg-red', 'green': 'bf-green'}[bgColor]\n      const data = {};\n      matches[1].split(',').forEach((kv) => {\n        const index = kv.indexOf(':');\n        const key = kv.substring(0, index).trim().replace(/^['\"]|['\"]$/g, '');\n        const val = kv.substring(index + 1).trim().replace(/^['\"]|['\"]$/g, '');\n        data[key] = val;\n      });\n      const watcher = (newVal, oldVal) => {\n        newVal = secure ? secureHtml(data[newVal]) : data[newVal];\n        oldVal = secure ? secureHtml(data[oldVal]) : data[oldVal];\n\n        if (newVal) {\n          $el.addClass(newVal);\n        }\n\n        if (oldVal) {\n          $el.removeClass(oldVal);\n        }\n      };\n\n      watcher($scope.$get(matches[2]));\n\n      return {\n        prop: matches[2],\n        watcher\n      };\n    });\n\n    if (watch) {\n      let unwatchers = [];\n      return {\n        $mount() {\n          for (const instance of instances) {\n            if (!instance) {\n              continue;\n            }\n\n            const {prop, watcher} = instance;\n            unwatchers.push($scope.$watch(prop, watcher))\n          }\n        },\n        $unmount() {\n          for (const unwatcher of unwatchers) {\n            unwatcher();\n          }\n          unwatchers = null;\n        }\n      };\n    }\n  } else {\n    prop.split(',').map((exp) => {\n      if (exp == null || exp === '') {\n        return;\n      }\n\n      return directive.pattern(construct(exp, watch, secure), $scope, $ctx, ({newVal, oldVal}) => {\n        newVal = secure ? secureHtml(newVal) : newVal;\n        oldVal = secure ? secureHtml(oldVal) : oldVal;\n\n        if (newVal) {\n          $el.addClass(newVal);\n        }\n\n        if (oldVal) {\n          $el.removeClass(oldVal);\n        }\n      });\n    });\n\n\n  }\n};\n\nexport default klass;\n","import directive from '../directive';\nimport {secureHtml, deconstruct} from '../utils';\n\n/**\n * attr指令\n * @param param0 \n */\nconst attr = ({$el, $exp, $arg, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    if (!(newVal === 'false' || !newVal)) {\n      $el.attr($arg, newVal);\n    } else {\n      $el.removeAttr($arg);\n    }\n  });\n};\n\nexport default attr;\n","import directive from '../directive';\nimport {secureHtml, deconstruct} from '../utils';\n\n/**\n * css指令\n * @param param0 \n */\nconst css = ({$el, $exp, $arg, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    $el.css($arg, newVal);\n  });\n};\n\nexport default css;\n","import directive from '../directive';\nimport {secureHtml, deconstruct} from '../utils';\n\n/**\n * data指令\n * @param param0 \n */\nconst data = ({$el, $exp, $arg, $scope, $ctx}) => { //$ctx, $el, $arg, $exp\n  return directive.pattern($exp, $scope, $ctx, ({newVal, secure}) => {\n    newVal = secure ? secureHtml(newVal) : newVal;\n    $el.attr('data-' + $arg, newVal);\n  });\n};\n\nexport default data;\n","import component from './component';\nimport element from './element';\nimport pipe from './pipe';\nimport {assign, include, getAttrs, deconstruct, MapList} from './utils';\n\n// 优先级常量, 最高-9, 默认0\nconst PRIOR = {\n  EMERGENCY: -9,\n  DEFAULT: 0\n};\n\n// 优先级\nconst priorities = [];\n\n// 全局指令\nconst directives = {};\n\n/**\n * 指令模块\n * 指令模块解析DOM上定义的属性并进行实例化\n * @param name 指令名\n * @param factory 工厂函数\n * @param priority 优先级\n */\nconst directive = (name, factory, priority = PRIOR.DEFAULT) => {\n\n  // 创建优先级\n  if (-1 === include(priorities, priority)) {\n    priorities.push(priority);\n    priorities.sort((prev, next) => {\n      return prev - next;\n    });\n  }\n\n  // 工厂函数上附加优先级\n  factory.priority = priority;\n  directives[name] = factory;\n};\n\nassign(directive, {\n  PRIOR,\n  initial($ctx) {\n\n    // 加载全局指令、局部指令至当前上下文\n    $ctx.$directives = assign({}, directives, $ctx.$directives);\n\n    // 记录指令实例,便于销毁释放\n    $ctx.$directives._instances = new MapList;\n  },\n  compile($el, $scope, $ctx) {\n\n    const handler = ($el, $ctx, priority) => {\n\n      // 是否为组件\n      if (component.isComponent($el, $ctx)) {\n        return $el;\n      }\n\n      // 获得当前元素的所有ATTR属性并进行编译\n      const attrs = getAttrs($el);\n      for (var attr in attrs) {\n        let name, arg;\n        const index = attr.indexOf(':');\n        if (index != -1) {\n          name = attr.substring(0, index);\n          arg = attr.substring(index + 1);\n        } else {\n          name = attr;\n          arg = null;\n        }\n\n        const factory = $ctx.$directives[name];\n        if (factory && (factory.priority || PRIOR.DEFAULT) === priority) {\n          const instance = factory({\n            $ctx,\n            $el,\n            $arg: arg,\n            $exp: attrs[attr],\n            $scope,\n            $directive: name\n          });\n\n          if (instance) {\n            instance.$mount && instance.$mount($ctx);\n            $ctx.$directives._instances.add(element.getId($el, true), instance);\n\n            // halt compile\n            // if (instance.$halt) {\n            //   return null;\n            // }\n\n            // if $el changed after compile\n            if (typeof instance.$el != 'undefined') {\n              $el = instance.$el;\n            }\n          }\n        }\n      }\n\n      return $el;\n    };\n\n    // 根据指令优先级由高至低进行编译\n    $el = priorities.reduce(($el, priority) => {\n      if (!$el) {\n        return null;\n      }\n\n      return handler($el, $ctx, priority);\n    }, $el);\n\n    return $el;\n\n  },\n  pattern($exp, $scope, $ctx, $update) {\n    const {prop, watch, secure, pipes} = deconstruct($exp);\n    const wather = (newVal, oldVal) => {\n      $update({newVal, oldVal, secure}); //secure ? secureHtml(value) : value\n    };\n    const pipeline = pipe.compile({\n      prop, watch, secure\n    }, pipes, $scope, wather, $ctx);\n\n    wather(pipeline($scope.$get(prop)));\n\n    if (watch) {\n      let unwatcher = null;\n      return {\n        $mount() {\n          unwatcher = $scope.$watch(prop, (newVal, oldVal) => {\n            wather(pipeline(newVal), pipeline(oldVal));\n          });\n        },\n        $unmount() {\n          unwatcher();\n          pipeline.destroy();\n        }\n      };\n    } else {\n      pipeline.destroy();\n    }\n  },\n  remove($el, $ctx) {\n    if (component.isComponent($el, $ctx)) {\n      return;\n    }\n\n    const id = element.getId($el);\n    if (id != null) {\n      const instances = $ctx.$directives._instances.find(id);\n      for (const instance of instances) {\n        instance.$unmount && instance.$unmount($ctx);\n      }\n      $ctx.$directives._instances.remove(id);\n    }\n  },\n  destroy($ctx) {\n    const keys = $ctx.$directives._instances.keys();\n    for (const key in keys) {\n      const instances = $ctx.$directives._instances.find(key);\n      for (const instance of instances) {\n        instance.$unmount && instance.$unmount(this);\n      }\n    }\n\n    $ctx.$directives._instances.clear();\n    $ctx.$directives._instances = null;\n    $ctx.$directives = null;\n  }\n});\n\nexport default directive;\n\n// 内建指令\nimport ef from './directives/if';\nimport repeat from './directives/repeat';\nimport on from './directives/on';\nimport bind from './directives/bind';\nimport value from './directives/value/index';\nimport show from './directives/show';\nimport hide from './directives/hide';\nimport disable from './directives/disable';\nimport enable from './directives/enable';\nimport readonly from './directives/readonly';\nimport src from './directives/src';\nimport href from './directives/href';\nimport klass from './directives/klass';\nimport attr from './directives/attr';\nimport css from './directives/css';\nimport data from './directives/data';\n\ndirective('hi-if', ef, directive.PRIOR.EMERGENCY);\ndirective('hi-repeat', repeat, directive.PRIOR.EMERGENCY);\ndirective('hi-on', on);\ndirective('hi-bind', bind);\ndirective('hi-value', value);\ndirective('hi-show', show);\ndirective('hi-hide', hide);\ndirective('hi-disable', disable);\ndirective('hi-enable', enable);\ndirective('hi-readonly', readonly);\ndirective('hi-src', src);\ndirective('hi-href', href);\ndirective('hi-class', klass);\ndirective('hi-attr', attr);\ndirective('hi-css', css);\ndirective('hi-data', data);\n","import {deconstruct, secureHtml} from '../utils';\nimport pipe from '../pipe';\n\n/**\n * bind宏\n * @param param0 \n */\nconst bind = ({$exp, $update, $scope, $ctx}) => {\n\n  const {prop, watch, secure, pipes} = deconstruct($exp);\n\n  const pipeline = pipe.compile({\n    prop, watch, secure\n  }, pipes, $scope, $update, $ctx);\n\n  if (watch) {\n    return {\n      $mount() {\n        $scope.$watch(prop, $update);\n      },\n      $unmount() {\n        $scope.$unwatch(prop, $update);\n        pipeline.destroy();\n      },\n      $iterator($text) {\n        return $text.replace($exp, () => {\n          let value = pipeline($scope.$get(prop));\n          value = value == null ? '' : value;\n          return secure ? secureHtml(value) : value;\n        });\n      }\n    };\n  } else {\n    let value = pipeline($scope.$get(prop));\n    value = value == null ? '' : value;\n    pipeline.destroy();\n    return {\n      $iterator: {\n        $exp,\n        $value: secure ? secureHtml(value) : value\n      }\n    }\n  }\n};\n\nexport default bind;\n","import component from './component';\nimport element from './element';\nimport {assign, MapList} from './utils';\n\n// 全局宏指令\nconst macros = {};\n\n/**\n * 宏指令\n * 在文本中的绑定,称之为宏,例如<span>hi, i am {{name}}, {{sex}}</span>\n * 宏指令使用正则表达式进行文本匹配,当文本匹配,调用相应的工厂函数生成宏指令实例\n * @param exp 正则表达式\n * @param factory 工厂函数\n */\nconst macro = (exp, factory) => {\n  macros[exp] = factory;\n};\n\nassign(macro, {\n\n\t/**\n   * 宏指令初始化\n   * @param $ctx 上下文\n   */\n  initial($ctx) {\n\n    // 加载全局宏指令、局部宏指令至当前上下文\n    $ctx.$macros = assign({}, macros, $ctx.$macros, true);\n\n    // 记录宏实例,便于销毁释放\n    $ctx.$macros._instances = new MapList;\n  },\n\n\t/**\n   * 宏指令编译\n   * @param $el 元素\n   * @param $scope 作用域\n   * @param $ctx 上下文\n   * @returns {*}\n   */\n  compile($el, $scope, $ctx) {\n\n    // 当前元素有子元素\n    if ($el.children().length) {\n      return $el;\n    }\n\n    // 获取元素原始文本\n    const text = $el.text();\n    if (text == null || text === '') {\n      return $el;\n    }\n\n\t\t/**\n     * 在一段文本中,可能有多个宏指令,例如<span>hi, i am {{name}}, {{sex}}</span>\n     * 其中任意一个字段值发生变化,都需要进行整体更新\n     * @type {Array}\n     */\n    const instances = [];\n    const update = () => {\n      if (!instances || !instances.length) {\n        return;\n      }\n\n\t\t\t//分别调用了宏指令实例的$iterator方法,获得最后的目标值\n      const newHtml = instances.reduce((text, instance) => {\n        const $iterator = instance.$iterator;\n        if (!$iterator) {\n          return text;\n        }\n\n        // 如$iterator是个函数,则调用\n\n\t\t\t\t/**\n         * 判断$iterator类型\n         * 如函数,则调用;如不是,直接进行replace\n         * 为什么需要判断$iterator类型?\n         * Highway同时支持双向绑定{{}}和单向绑定[[]]\n         * 例如<span>hi, i am {{name}}, [[sex]]</span>\n         * {{name}}双向, [[sex]]单向\n         * 双向绑定相较于单向绑定会耗费更多的内存资源,对于大多数情况而言,单向绑定已满足需求\n         * 在使用单向绑定时直接返回目标值,可以减少内存资源占用\n         */\n        if ($.isFunction($iterator)) {\n          return $iterator(text);\n        } else {\n          return text.replace($iterator.$exp, $iterator.$value);\n        }\n\n      }, text);\n\n\t\t\t/**\n       * 获取目标值后进行更新\n       * 为什么使用html()而不是text()?\n       * Highway支持安全编码{{ }}、[[ ]]和非安全编码{{{ }}}、[[[ ]]]\n       * 例如使用name值为&nbsp; {{name}}输出{{&nbsp;}}, {{{name}}}输出{{{ }}}\n       * 在使用时尽量使用安全编码,防止跨站攻击等安全问题\n       */\n\n      $el.html(newHtml == null ? '' : newHtml);\n    };\n\n\t\t/**\n     * 对当期文本调用宏指令正则表达式\n     * 如果匹配,则生成宏指令实例\n     */\n    for (const exp in $ctx.$macros) {\n      const matches = text.match(new RegExp(exp, 'gm'));\n      if (matches) {\n        // 有可能匹配到了多个, 例如: <span>hi, i am {{name}}, {{sex}}</span>\n        for (const match of matches) {\n          //以匹配到{{name}}为例\n          const instance = $ctx.$macros[exp]({\n            $ctx, // 上下文\n            $el, // 元素。 示例值为: span\n            $exp: match, // name\n            $update: update, // 更新函数,如果字段值发生变化,需要即使更新显示值\n            $scope // 作用域\n          });\n          if (!$.isFunction(instance.$iterator)) {\n            instance.$iterator.$exp = match;\n          };\n\n          // $mount hook\n          instance.$mount && instance.$mount($ctx);\n\n          // instance\n          instances.push(instance);\n\n          // 为元素编码,在删除元素时需要释放对应的宏指令实例\n          $ctx.$macros._instances.add(element.getId($el, true), instance);\n        }\n      }\n    }\n\n    // 首次调用触发更新\n    update();\n\n    return $el;\n  },\n\t/**\n   * 销毁元素上的宏指令实例\n   * @param $el DOM元素\n   * @param $ctx 上下文\n   */\n  remove($el, $ctx) {\n\n    // 如果是组件, 返回, 组件的销毁由组件模块进行销毁\n    if (component.isComponent($el, $ctx)) {\n      return;\n    }\n\n    // 获取DOM元素上的ID,得到对应的宏指令实例,并进行销毁\n    const id = element.getId($el);\n    if (id != null) {\n      let instances = $ctx.$macros._instances.find(id);\n      for (const instance of instances) {\n        instance.$unmount && instance.$unmount($ctx);\n      }\n      $ctx.$macros._instances.remove(id);\n    }\n  },\n\t/**\n   * 销毁宏指令模块\n   * @param $ctx 上下文\n   */\n  destroy($ctx) {\n\n    // 销毁所有宏指令实例\n    const keys = $ctx.$macros._instances.keys();\n    for (const key in keys) {\n      const instances = $ctx.$macros._instances.find(key);\n      for (const instance of instances) {\n        instance.$unmount && instance.$unmount($ctx);\n      }\n    }\n    $ctx.$macros._instances.clear();\n    $ctx.$macros._instances = null;\n    $ctx.$macros = null;\n\n  }\n});\n\nexport default macro;\n\n// 内建宏指令\nimport bind from './macros/bind';\nmacro('\\\\[?\\\\[\\\\[([^\\\\]]+)]]]?|\\\\{?\\\\{\\\\{([^}]+)}}}?', bind);\n//macro('\\\\[?\\\\[\\\\[(\\\\S+)]]]?|\\\\{?\\\\{\\\\{(\\\\S+)}}}?', bind);\n","import element from './element';\nimport component from './component';\nimport service from './service';\nimport directive from './directive';\nimport macro from './macro';\nimport pipe from './pipe';\n\n/**\n * 编译器\n * 对元素（模板）、管道、服务、指令、组件、宏编译服务进行挂载与编译\n * 编译器进行编译工作时，对指定DOM元素进行递归遍历编译\n * @type {{initial: (($ctx?)), compile: (($el?, $scope?, $ctx?)), remove: (($el?, $ctx?)), destroy: (($ctx?))}}\n */\nconst compiler = {\n\n  /**\n   * 初始化\n   * @param $ctx 上下文\n   */\n  initial($ctx) {\n\n    // 元素\n    element.initial($ctx);\n\n    // 管道\n    pipe.initial($ctx);\n\n    // 服务\n    service.initial($ctx);\n\n    // 指令\n    directive.initial($ctx);\n\n    // 宏指令\n    macro.initial($ctx);\n\n    // 组件\n    component.initial($ctx);\n\n    return this;\n  },\n\n\t/**\n   * 对DOM进行遍历并编译\n   * @param $el 元素\n   * @param $scope 作用域\n   * @param $ctx 上下文\n   */\n  compile($el, $scope, $ctx) {\n\n\t\t/**\n     * 迭代\n     * @param $el 元素\n     * @param $scope 作用域\n     * @param $ctx 上下文\n     */\n    const iterator = ($el, $scope, $ctx) => {\n      if (!$el || !$el.length) {\n        return;\n      }\n\n      // 如果是组件,则进行组件编译\n      if (component.isComponent($el, $ctx)) {\n\n        // 组件编译\n        component.compile($el, $ctx)\n      } else {\n\n        // 指令编译\n        if ($el = directive.compile($el, $scope, $ctx)) {\n\n          // 宏指令编译\n          if ($el = macro.compile($el, $scope, $ctx)) {\n\n            // 子元素\n            for (const childNode of Array.prototype.slice.call($el.children())) {\n              iterator($(childNode), $scope, $ctx);\n            }\n          }\n        }\n      }\n    };\n\n    iterator($el, $scope, $ctx);\n\n    return this;\n  },\n\n\t/**\n   * 对DOM元素进行销毁并删除\n   * @param $el 元素\n   * @param $ctx 上下文\n   * @returns {compiler.remove}\n   */\n  remove($el, $ctx) {\n\n\t\t/**\n     * 迭代器\n     * @param $el 元素\n     * @param $ctx 上下文\n     */\n    const iterator = ($el, $ctx) => {\n      if (!$el || !$el.length) {\n        return;\n      }\n\n      // 如果是组件\n      if (component.isComponent($el, $ctx)) {\n\n        // 组件销毁\n        component.remove($el, $ctx);\n      } else {\n\n        // 遍历子元素\n        for (const childNode of Array.prototype.slice.call($el.children())) {\n          iterator($(childNode), $ctx);\n        }\n\n        // 宏指令销毁\n        macro.remove($el, $ctx);\n\n        // 指令销毁\n        directive.remove($el, $ctx);\n\n        // 元素销毁\n        element.remove($el, $ctx);\n      }\n    };\n\n    iterator($el, $ctx);\n\n    return this;\n  },\n  destroy($ctx) {\n\n    // 组件\n    component.destroy($ctx);\n\n    // 宏指令\n    macro.destroy($ctx);\n\n    // 指令\n    directive.destroy($ctx);\n\n    // 服务\n    service.destroy($ctx);\n\n    // 管道\n    pipe.destroy($ctx);\n\n    // 元素\n    element.destroy($ctx);\n\n    return this;\n  }\n};\n\nexport default compiler;\n","import {extend, assign} from './utils';\nimport compiler from './compiler';\n\n/**\n * 视图层\n */\nclass View {\n  static extend = extend;\n\n  /**\n   * 构造\n   * @param options 参数\n   */\n\n  constructor(options) {\n\n    assign(this, options);\n\n    // $willmount hook\n    this.$willmount && this.$willmount();\n\n    // compiler, initial -> compile\n    compiler.initial(this).compile(this.$el, this.$scope, this);\n\n    // $mount hook，最常用\n    this.$mount && this.$mount();\n\n    // $didmount hook\n    this.$didmount && this.$didmount();\n  }\n\n  /**\n   * 销毁\n   */\n  $destroy() {\n\n    // $willunmount hook\n    this.$willunmount && this.$willunmount();\n\n    // compiler, remove -> destroy\n    compiler.remove(this.$el, this).destroy(this);\n\n    // $unmount hook, 最常用\n    this.$unmount && this.$unmount();\n\n    // $didunmount hook\n    this.$didunmount && this.$didunmount();\n  }\n}\n\nexport default View;\n","import View from './view';\nimport component from './component';\nimport service from './service';\nimport directive from './directive';\nimport macro from './macro';\nimport pipe from './pipe';\nimport utils from './utils';\n\n/**\n * Highway MVVM\n */\nconst highway = utils.assign(View, {\n  component,\n  directive,\n  service,\n  macro,\n  pipe,\n  utils\n});\n\nexport default highway;\n","//import 'babel-polyfill';\nimport Highway from './highway';\n\nwindow.Highway = Highway;\n\n"],"names":["counter","unique","prefix","assign","args","Array","prototype","slice","call","arguments","jQuery","deep","length","pop","unshift","$","extend","apply","include","arr","val","i","ii","isPlainObject","isDate","Date","isArray","Object","toString","isObject","isNumeric","isNaN","isTrue","isEqual","val0","val1","options","Parent","this","Child","MapList","data","key","value","push","remove","list","v","splice","result","k","keys","values","concat","find","deconstruct","exp","watch","secure","test","trim","replace","exps","split","map","attr","construct","secureHtml","html","secureUri","getAttrs","$el","attrs","node","attributes","hasOwnProperty","name","components","component","View","toLowerCase","$ctx","$components","_instances","$refs","isComponent","createComponent","instance","add","element","getId","ref","instances","nodeType","tagName","$parent","$new","hi-component","replaceWith","id","forEach","$destroy","$template","generate","lowercase","$value","uppercase","toUpperCase","sort","$source","sourceProp","prop","sourceWatch","sourceSecure","$exp","$scope","$pipeline","$update","matches","match","fieldProp","ascProp","iterator","field","$get","asc","a","b","fieldUnwatcher","ascUnwatcher","$watch","limit","unwatcher","SYMBOLS","filter","conds","satisfy","obj","symbol","valueProp","EQUAL","STRICT_EQUAL","NOT_EQUAL","STRICT_NOT_EQUAL","START_WITH","RegExp","END_WITH","CONTAINS","item","unwatchers","json","JSON","stringify","date","format","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","$1","getFullYear","substr","number","toFixed","pipes","pipe","factory","$pipes","pipeline","reduce","$iterator","index","indexOf","substring","$mount","$unmount","clear","scope","series","watchers","create","prop2","childProp","where","$where","newVal","path","props","tmp","shift","join","oldSeries","newSeries","$series","arrayIndex","oldValue","newValue","$fire","handler","$unwatch","oldVal","handlers","bind","$set","event","events","$on","$off","$listenTo","$listenToOnce","stopper","once","$stopListening","$emit","parent","$broadcast","child","listenToOnce","timeout","ids","$timeout","delay","window","setTimeout","clearTimeout","$clear","interval","$interval","setInterval","clearInterval","http","$http","ajax","get","post","getJSON","ajaxJSONP","ajaxSettings","ajaxSetup","$find","selector","services","service","$services","ef","$directive","$arg","$clone","clone","removeAttr","$prev","prev","$next","next","watcher","insertBefore","insertAfter","appendTo","compile","repeat","itemProp","arrayProp","$els","scopes","$index","$create","reverse","destroy","on","$ev","off","directive","pattern","text","$srcEl","inputer","tel","password","radio","checked","checkbox","input","textarea","select","nodeName","show","css","hide","disable","enable","readonly","src","href","klass","regexp","kv","addClass","removeClass","PRIOR","priorities","directives","priority","DEFAULT","$directives","arg","wather","EMERGENCY","$text","macros","macro","$macros","children","update","newHtml","isFunction","compiler","initial","childNode","$willmount","$didmount","$willunmount","$didunmount","highway","utils","Highway"],"mappings":"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"}